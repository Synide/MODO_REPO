

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<!-- Mirrored from learn.foundry.com/modo/developers/latest/sdk/pages/tutorials/Texture test.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 30 Nov 2024 03:16:10 GMT -->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Texture test &mdash; Modo SDK 14.2v0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/js/contentui.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Tool spikey" href="Tool%20spikey.html" />
    <link rel="prev" title="Symbols defined in the lx package" href="Symbols%20defined%20in%20the%20lx%20package.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Modo SDK
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="https://learn.foundry.com/modo/developers/latest/sdk/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Articles</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../starting/_starting.html">First Steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server_basics/_server_basics.html">Server Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/_general.html">Editorial Info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ui/_ui.html">User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scripting/_scripting.html">Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faqs/_faqs.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption"><span class="caption-text">Code Examples</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="_tutorials.html">SDK Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Channel%20Mod%20Linear%20Blend.html">Channel Mod Linear Blend</a></li>
<li class="toctree-l2"><a class="reference internal" href="Channel%20Mod%20Math%20Multi.html">Channel Mod Math Multi</a></li>
<li class="toctree-l2"><a class="reference internal" href="Channel%20Mod%20Simple%20Kinematics.html">Channel Mod Simple Kinematics</a></li>
<li class="toctree-l2"><a class="reference internal" href="Color%20Model%20HSV.html">Color Model HSV</a></li>
<li class="toctree-l2"><a class="reference internal" href="Colormodel%20kelvin.html">Colormodel kelvin</a></li>
<li class="toctree-l2"><a class="reference internal" href="Command%20VertValue.html">Command VertValue</a></li>
<li class="toctree-l2"><a class="reference internal" href="Creating%20a%20Selection%20Set.html">Creating a Selection Set</a></li>
<li class="toctree-l2"><a class="reference internal" href="CustomView.html">CustomView</a></li>
<li class="toctree-l2"><a class="reference internal" href="Hello%20World.html">Hello World</a></li>
<li class="toctree-l2"><a class="reference internal" href="HostService%20Reference.html">HostService Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="Io%20image%20raw.html">Io image raw</a></li>
<li class="toctree-l2"><a class="reference internal" href="Io%20scene%20geo.html">Io scene geo</a></li>
<li class="toctree-l2"><a class="reference internal" href="Io%20scene%20hgpl.html">Io scene hgpl</a></li>
<li class="toctree-l2"><a class="reference internal" href="Item%20Command%20Arguments.html">Item Command Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="Item%20gasket.html">Item gasket</a></li>
<li class="toctree-l2"><a class="reference internal" href="Item%20mandelbrot.html">Item mandelbrot</a></li>
<li class="toctree-l2"><a class="reference internal" href="Item%20orb.html">Item orb</a></li>
<li class="toctree-l2"><a class="reference internal" href="Language%20Wrappers.html">Language Wrappers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Mesh%20Operation%20-%20Automatic%20implementation.html">Mesh Operation - Automatic implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Mesh%20Operation%20-%20Example.html">Mesh Operation - Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="Mesh%20Operation%20-%20Manual%20implementation.html">Mesh Operation - Manual implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Modo%20Version%20History.html">Modo Version History</a></li>
<li class="toctree-l2"><a class="reference internal" href="Movie%20cocoaqt.html">Movie cocoaqt</a></li>
<li class="toctree-l2"><a class="reference internal" href="Multiple%20Servers%20in%20One%20Module.html">Multiple Servers in One Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="Network%20Rendering.html">Network Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="Package%20or%20Item%20Type%20(metaclass).html">Package or Item Type (metaclass)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Path%20Aliases.html">Path Aliases</a></li>
<li class="toctree-l2"><a class="reference internal" href="Pattern%20Matching.html">Pattern Matching</a></li>
<li class="toctree-l2"><a class="reference internal" href="PlatformService%20Reference.html">PlatformService Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plug-ins%20vs.%20Scripts.html">Plug-ins vs. Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="Pop-up%20List%20Choice.html">Pop-up List Choice</a></li>
<li class="toctree-l2"><a class="reference internal" href="Preference%20Forms.html">Preference Forms</a></li>
<li class="toctree-l2"><a class="reference internal" href="Prepare_Evaluate%20Protocol.html">Prepare/Evaluate Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="Preset%20Browser%20Filtering.html">Preset Browser Filtering</a></li>
<li class="toctree-l2"><a class="reference internal" href="Preset%20Browser%20Paths.html">Preset Browser Paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="Preview%20Socket.html">Preview Socket</a></li>
<li class="toctree-l2"><a class="reference internal" href="Procedural%20Geometry.html">Procedural Geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python.html">Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python%20API%20Overview.html">Python API Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python%20Command%20Overview.html">Python Command Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python%20Notifier%20Example.html">Python Notifier Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python%20Samples.html">Python Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python%20Treeview%20Example.html">Python Treeview Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python%20in%20Modo.html">Python in Modo</a></li>
<li class="toctree-l2"><a class="reference internal" href="Query%20Command%20Values%20example.html">Query Command Values example</a></li>
<li class="toctree-l2"><a class="reference internal" href="RandomSel%20Script.html">RandomSel Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="Reading%20Files%20with%20Python.html">Reading Files with Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="Reading%20Persistant%20Data.html">Reading Persistant Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="Reading%20UV%20Values.html">Reading UV Values in Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="Render%20Frame%20Size.html">Render Frame Size</a></li>
<li class="toctree-l2"><a class="reference internal" href="Scene%20Query.cpp.html">Scene Query.cpp</a></li>
<li class="toctree-l2"><a class="reference internal" href="Select.typeFrom.html">Select.typeFrom</a></li>
<li class="toctree-l2"><a class="reference internal" href="Selection%20Operation%20-%20Automatic%20implementation.html">Selection Operation - Automatic implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Selection%20Operation%20-%20Manual%20implementation.html">Selection Operation - Manual implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Server%20Tags.html">Server Tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="Singleton%20Listener.html">Singleton Listener</a></li>
<li class="toctree-l2"><a class="reference internal" href="Singleton%20Polymorph.html">Singleton Polymorph</a></li>
<li class="toctree-l2"><a class="reference internal" href="Startup%20Commands.html">Startup Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="Symbols%20defined%20in%20the%20lx%20package.html">Symbols defined in the lx package</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Texture test</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#code-walkthrough">Code Walkthrough</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#class-declaration">Class declaration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#server-tags"><span class="xref std std-doc">./Server_Tags</span></a></li>
<li class="toctree-l4"><a class="reference internal" href="#initialize-index"><span class="xref std std-doc">./Initialize_(index)</span></a></li>
<li class="toctree-l4"><a class="reference internal" href="#helper-functions">Helper Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#implementations">Implementations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Tool%20spikey.html">Tool spikey</a></li>
<li class="toctree-l2"><a class="reference internal" href="Using%20Loader%20Options.html">Using Loader Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="Writing%20to%20the%20Event%20Log.html">Writing to the Event Log</a></li>
<li class="toctree-l2"><a class="reference internal" href="Writing%20to%20the%20modo%20event%20log%20and%20debugger.html">Writing to the modo event log and debugger</a></li>
<li class="toctree-l2"><a class="reference internal" href="Your%20First%20Tool%20in%20Modo.html">Your First Tool in Modo</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples/_examples.html">Code Examples and Snippets</a></li>
</ul>
<p class="caption"><span class="caption-text">Technical Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../python/python.html">Python Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpp/cpp.html">C++ Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Modo SDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="_tutorials.html">SDK Tutorials</a> &raquo;</li>
        
      <li>Texture test</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="texture-test">
<h1>Texture test<a class="headerlink" href="#texture-test" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#code-walkthrough" id="id1">Code Walkthrough</a></p>
<ul>
<li><p><a class="reference internal" href="#class-declaration" id="id2">Class declaration</a></p></li>
<li><p><a class="reference internal" href="#server-tags" id="id3"><span class="xref std std-doc">./Server_Tags</span></a></p></li>
<li><p><a class="reference internal" href="#initialize-index" id="id4"><span class="xref std std-doc">./Initialize_(index)</span></a></p></li>
<li><p><a class="reference internal" href="#helper-functions" id="id5">Helper Functions</a></p></li>
<li><p><a class="reference internal" href="#implementations" id="id6">Implementations</a></p></li>
</ul>
</li>
</ul>
</div>
<p>Texture_test is a basic example plugin. This wiki page is intended as a walkthrough of the code in order to help you better understand the SDK.</p>
<p>This plugin is a test of plugin value textures, essentially a type of procedural.</p>
<div class="section" id="code-walkthrough">
<h2><a class="toc-backref" href="#id1">Code Walkthrough</a><a class="headerlink" href="#code-walkthrough" title="Permalink to this headline">¶</a></h2>
<div class="section" id="class-declaration">
<h3><a class="toc-backref" href="#id2">Class declaration</a><a class="headerlink" href="#class-declaration" title="Permalink to this headline">¶</a></h3>
<p>We want to create a custom value texture, so we inherit from CLxImpl_ValueTexture, which has all the methods for creating a value texture. We then redeclare most of the methods in the CLxImpl_ValueTexture class(they are the ones with the vtx prefixes) and customize the functions to our specifications. The first three functions set up and access the channels we want to use for our texture. The Evaluate function then evaluates the color of the function using the values of the channels that we have accessed. Finally, the cleanup function releases the cached state after the evaluate function is finished rendering.</p>
<p>We also want to customize and create a ui for our channels, so we inherit from CLxImpl_ChannelUI. We then redeclare three of the functions contained in CLxImpl_ChannelUI. They cui_Enabled function indicates that we turn on the channel ui. The DependencyCount and DependencyByIndex functions list the channels that affect a given target channel.</p>
<p>This has the basic ValueTexture interface to support simple multi-effect evaluations, plus the ChannelUI interface for enable states. The local RendData struct is used for storing values used for a specific texture evaluation.</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="k">class</span> <span class="nc">CTestTexture</span> <span class="p">:</span>
                <span class="n">public</span> <span class="n">CLxImpl_ValueTexture</span><span class="p">,</span>
                <span class="n">public</span> <span class="n">CLxImpl_ChannelUI</span>
 <span class="p">{</span>
    <span class="n">public</span><span class="p">:</span>
        <span class="n">static</span> <span class="n">LXtTagInfoDesc</span>            <span class="n">descInfo</span><span class="p">[];</span>

        <span class="n">CTestTexture</span> <span class="p">();</span>

        <span class="n">LxResult</span>                <span class="n">vtx_SetupChannels</span> <span class="p">(</span><span class="n">ILxUnknownID</span> <span class="n">addChan</span><span class="p">);</span>
        <span class="n">LxResult</span>                <span class="n">vtx_LinkChannels</span>  <span class="p">(</span><span class="n">ILxUnknownID</span> <span class="nb">eval</span><span class="p">,</span> <span class="n">ILxUnknownID</span> <span class="n">item</span><span class="p">);</span>
        <span class="n">LxResult</span>                <span class="n">vtx_ReadChannels</span>  <span class="p">(</span><span class="n">ILxUnknownID</span> <span class="n">attr</span><span class="p">,</span> <span class="n">void</span> <span class="o">**</span><span class="n">ppvData</span><span class="p">);</span>
        <span class="n">void</span>                    <span class="n">vtx_Evaluate</span>      <span class="p">(</span><span class="n">ILxUnknownID</span> <span class="n">vector</span><span class="p">,</span> <span class="n">LXpTextureOutput</span> <span class="o">*</span><span class="n">tOut</span><span class="p">,</span> <span class="n">void</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
        <span class="n">void</span>                    <span class="n">vtx_Cleanup</span>       <span class="p">(</span><span class="n">void</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>

        <span class="n">LxResult</span>                <span class="n">cui_Enabled</span>           <span class="p">(</span><span class="n">const</span> <span class="n">char</span> <span class="o">*</span><span class="n">channelName</span><span class="p">,</span> <span class="n">ILxUnknownID</span> <span class="n">msg</span><span class="p">,</span> <span class="n">ILxUnknownID</span> <span class="n">item</span><span class="p">,</span> <span class="n">ILxUnknownID</span> <span class="n">read</span><span class="p">);</span>
        <span class="n">LxResult</span>                <span class="n">cui_DependencyCount</span>   <span class="p">(</span><span class="n">const</span> <span class="n">char</span> <span class="o">*</span><span class="n">channelName</span><span class="p">,</span> <span class="n">unsigned</span> <span class="o">*</span><span class="n">count</span><span class="p">);</span>
        <span class="n">LxResult</span>                <span class="n">cui_DependencyByIndex</span> <span class="p">(</span><span class="n">const</span> <span class="n">char</span> <span class="o">*</span><span class="n">channelName</span><span class="p">,</span> <span class="n">unsigned</span> <span class="n">index</span><span class="p">,</span> <span class="n">LXtItemType</span> <span class="o">*</span><span class="n">depItemType</span><span class="p">,</span> <span class="n">const</span> <span class="n">char</span> <span class="o">**</span><span class="n">depChannelName</span><span class="p">);</span>

        <span class="n">LXtItemType</span>             <span class="n">MyType</span> <span class="p">();</span>

        <span class="n">CLxUser_PacketService</span>   <span class="n">pkt_service</span><span class="p">;</span>
        <span class="n">unsigned</span>                <span class="n">idx_sat</span><span class="p">,</span> <span class="n">idx_lo</span><span class="p">,</span> <span class="n">idx_hi</span><span class="p">;</span>
        <span class="n">unsigned</span>                <span class="n">tin_offset</span><span class="p">;</span>
        <span class="n">LXtItemType</span>             <span class="n">my_type</span><span class="p">;</span>

        <span class="k">class</span> <span class="nc">RendData</span> <span class="p">{</span>
            <span class="n">public</span><span class="p">:</span>
                <span class="nb">float</span>           <span class="n">f_sat</span><span class="p">,</span> <span class="n">f_base</span><span class="p">,</span> <span class="n">f_mult</span><span class="p">;</span>
        <span class="p">};</span>
 <span class="p">};</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="server-tags">
<h3><a class="toc-backref" href="#id3"><span class="xref std std-doc">./Server_Tags</span></a><a class="headerlink" href="#server-tags" title="Permalink to this headline">¶</a></h3>
<p>Servers tags are examined when the server is initialized, and give information about the server. We set the tags in this case by taking descinfo[] arrays and associating the relevant data with the corresponding flags.</p>
<p>The tags here indicate that server has the name Test Value Texture with the internal name of val-texture.</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">LXtTagInfoDesc</span>  <span class="n">CTestTexture</span><span class="p">::</span><span class="n">descInfo</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="p">{</span> <span class="n">LXsSRV_USERNAME</span><span class="p">,</span>      <span class="s2">&quot;Test Value Texture&quot;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="n">LXsSRV_LOGSUBSYSTEM</span><span class="p">,</span>  <span class="s2">&quot;val-texture&quot;</span>   <span class="p">},</span>
        <span class="p">{</span> <span class="mi">0</span> <span class="p">}</span>
 <span class="p">};</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="initialize-index">
<h3><a class="toc-backref" href="#id4"><span class="xref std std-doc">./Initialize_(index)</span></a><a class="headerlink" href="#initialize-index" title="Permalink to this headline">¶</a></h3>
<p>Servers are extensible set of features that we add to modo, usually through plugins. Intialize is called when we add the plugin to modo, and is the utility that exports the server.</p>
<p>This function exports a server of the TEXTURE type dependent on the CTestTexture class with the ValueTexture, ChannelUI, and StaticDesc interfaces.</p>
<div class="highlight-:linenos: notranslate"><div class="highlight"><pre><span></span>        void
        Initialize()
        {
               CLxGenericPolymorph             *srv;

               srv = new CLxPolymorph&lt;CTestTexture&gt;;
               srv-&gt;AddInterface (new CLxIfc_ValueTexture&lt;CTestTexture&gt;);
               srv-&gt;AddInterface (new CLxIfc_ChannelUI   &lt;CTestTexture&gt;);
               srv-&gt;AddInterface (new CLxIfc_StaticDesc  &lt;CTestTexture&gt;);
               lx::AddServer (SRVs_TEXTURE, srv);
}
</pre></div>
</div>
</div>
<div class="section" id="helper-functions">
<h3><a class="toc-backref" href="#id5">Helper Functions</a><a class="headerlink" href="#helper-functions" title="Permalink to this headline">¶</a></h3>
<p>Utilities for RGB/HSV conversion. The second utility is used in the vtx_evaluate function.</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="c1">#define MIN(a,b)       ((a) &lt; (b) ? (a) : (b))</span>
 <span class="c1">#define MAX(a,b)       ((a) &lt; (b) ? (b) : (a))</span>
 <span class="c1">#define PI             3.14159265</span>
 <span class="c1">#define TWOPI          (2 * PI)</span>

 <span class="c1">#define _R             rgb[0]</span>
 <span class="c1">#define _G             rgb[1]</span>
 <span class="c1">#define _B             rgb[2]</span>
 <span class="c1">#define _H             hsv[0]</span>
 <span class="c1">#define _S             hsv[1]</span>
 <span class="c1">#define _V             hsv[2]</span>

        <span class="n">static</span> <span class="n">void</span>
 <span class="n">RGB2HSV</span> <span class="p">(</span>
        <span class="n">const</span> <span class="n">LXtFVector</span>         <span class="n">rgb</span><span class="p">,</span>
        <span class="n">LXtFVector</span>               <span class="n">hsv</span><span class="p">)</span>
 <span class="p">{</span>
        <span class="o">...</span>
 <span class="p">}</span>

        <span class="n">static</span> <span class="n">void</span>
 <span class="n">HSV2RGB</span> <span class="p">(</span>
        <span class="n">const</span> <span class="n">LXtFVector</span>         <span class="n">hsv</span><span class="p">,</span>
        <span class="n">LXtFVector</span>               <span class="n">rgb</span><span class="p">)</span>
 <span class="p">{</span>
    <span class="o">...</span>
 <span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="implementations">
<h3><a class="toc-backref" href="#id6">Implementations</a><a class="headerlink" href="#implementations" title="Permalink to this headline">¶</a></h3>
<p>This function creates the channels for the item type using the methods of an Package_(lx-package.hpp)#.2815.29_SDK:_ILxAddChannel_interface method object.</p>
<div class="highlight-:linenos: notranslate"><div class="highlight"><pre><span></span>        LxResult
        CTestTexture::vtx_SetupChannels (
               ILxUnknownID             addChan)
        {
              ...
}
</pre></div>
</div>
<p>This function attaches the channels to channel evaluation. This gets indices for the channels in attributes through the AddChan method of a Action_(lx-action.hpp)#.2822.29_User_Class:_Evaluation_method object.</p>
<div class="highlight-:linenos: notranslate"><div class="highlight"><pre><span></span>        LxResult
        CTestTexture::vtx_LinkChannels (
               ILxUnknownID             eval,
               ILxUnknownID             item)
        {
               ...
}
</pre></div>
</div>
<p>This function reads channel values which may have changed. These are stored in the allocated data for later evaluation.</p>
<div class="highlight-:linenos: notranslate"><div class="highlight"><pre><span></span>               LxResult
        CTestTexture::vtx_ReadChannels (
               ILxUnknownID             attr,
               void                   **ppvData)
        {
              ...
}
</pre></div>
</div>
<p>Evaluate the value andor color at the current shading spot using cached values. This is the core of the texture value plugin, the place where actual values are computed and passed down to the texture engine. The role of the texture plugin is to set tOut-&gt;value, this value is then applied as a texture effect.</p>
<p>For example if the texture effect is ‘displacement’, the value will be transformed into a displacement distance by multiplying the value by the displacement amplitude. This is not the job of texture value plugin however, all the texture needs to do is provide the value (between 0 and 1).</p>
<p>For color effects, the texture can either set the color indirectly by setting a value that interpolates the 2 base colors, or directly by setting the color (tOut-&gt;color[0]) and setting tOut-&gt;direct to 1. Most procedural textures use the first method: they compute a value and that interpolates 2 base colors (tOut-&gt;color[0], tOut-&gt;color[1]), but other textures such as image maps set the color directly because the result of their computation is a color.</p>
<div class="highlight-:linenos: notranslate"><div class="highlight"><pre><span></span>        void
        CTestTexture::vtx_Evaluate (
               ILxUnknownID             vector,
               LXpTextureOutput        *tOut,
               void                    *data)
        {
               ...
}
</pre></div>
</div>
<p>Release the cached state after rendering is complete using the RendData class defined in our CTestTexture class.</p>
<div class="highlight-:linenos: notranslate"><div class="highlight"><pre><span></span>        void
        CTestTexture::vtx_Cleanup (
                void                   *data)
        {
               ...
}
</pre></div>
</div>
<p>Release the cached state after rendering is complete using the LXa_SCENESERVICE_(index)#Item_Types object.</p>
<div class="highlight-:linenos: notranslate"><div class="highlight"><pre><span></span>               LXtItemType
        CTestTexture::MyType ()
        {
               ...
}
</pre></div>
</div>
<p>Utility to get the type code for this item type, as needed.</p>
<div class="highlight-:linenos: notranslate"><div class="highlight"><pre><span></span>        LXtItemType
        CTestTexture::MyType ()
        {
              ...
}
</pre></div>
</div>
<p>Test if a given channel is enabled. We’re going to disable the saturation channel if both the high and low are set to zero. I’m using common message 99, which just repeats its string argument, but normally this would be defined in a dedicated message table.</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">LxResult</span>
 <span class="n">CTestTexture</span><span class="p">::</span><span class="n">cui_Enabled</span> <span class="p">(</span>
        <span class="n">const</span> <span class="n">char</span>              <span class="o">*</span><span class="n">channelName</span><span class="p">,</span>
        <span class="n">ILxUnknownID</span>             <span class="n">msg</span><span class="p">,</span>
        <span class="n">ILxUnknownID</span>             <span class="n">item</span><span class="p">,</span>
        <span class="n">ILxUnknownID</span>             <span class="n">read</span><span class="p">)</span>
 <span class="p">{</span>
        <span class="o">...</span>
 <span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Dependency count/byIndex list the channels that affect a given target channel. In our case the saturation channel is affected by changes to the low and high channels of this same item type.</p>
<div class="highlight-:linenos: notranslate"><div class="highlight"><pre><span></span>        LxResult
        CTestTexture::cui_DependencyCount (
               const char              *channelName,
               unsigned                *count)
        {
              ...
        }

               LxResult
        CTestTexture::cui_DependencyByIndex (
               const char              *channelName,
               unsigned                 index,
               LXtItemType             *depItemType,
               const char             **depChannelName)
        {
              ...
}
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Tool%20spikey.html" class="btn btn-neutral float-right" title="Tool spikey" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Symbols%20defined%20in%20the%20lx%20package.html" class="btn btn-neutral float-left" title="Symbols defined in the lx package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Foundry

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org/">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>

<!-- Mirrored from learn.foundry.com/modo/developers/latest/sdk/pages/tutorials/Texture test.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 30 Nov 2024 03:16:10 GMT -->
</html>