

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<!-- Mirrored from learn.foundry.com/modo/developers/latest/sdk/pages/tutorials/Creating a Selection Set.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 30 Nov 2024 03:16:03 GMT -->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Creating a Selection Set &mdash; Modo SDK 14.2v0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/js/contentui.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="CustomView" href="CustomView.html" />
    <link rel="prev" title="Command VertValue" href="Command%20VertValue.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Modo SDK
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="https://learn.foundry.com/modo/developers/latest/sdk/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Articles</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../starting/_starting.html">First Steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server_basics/_server_basics.html">Server Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/_general.html">Editorial Info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ui/_ui.html">User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scripting/_scripting.html">Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faqs/_faqs.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption"><span class="caption-text">Code Examples</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="_tutorials.html">SDK Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Channel%20Mod%20Linear%20Blend.html">Channel Mod Linear Blend</a></li>
<li class="toctree-l2"><a class="reference internal" href="Channel%20Mod%20Math%20Multi.html">Channel Mod Math Multi</a></li>
<li class="toctree-l2"><a class="reference internal" href="Channel%20Mod%20Simple%20Kinematics.html">Channel Mod Simple Kinematics</a></li>
<li class="toctree-l2"><a class="reference internal" href="Color%20Model%20HSV.html">Color Model HSV</a></li>
<li class="toctree-l2"><a class="reference internal" href="Colormodel%20kelvin.html">Colormodel kelvin</a></li>
<li class="toctree-l2"><a class="reference internal" href="Command%20VertValue.html">Command VertValue</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Creating a Selection Set</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#localizing-a-mesh-for-editing">Localizing a Mesh for Editing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">Creating a Selection Set</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding-points-to-the-selection-set">Adding Points to the Selection Set</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="CustomView.html">CustomView</a></li>
<li class="toctree-l2"><a class="reference internal" href="Hello%20World.html">Hello World</a></li>
<li class="toctree-l2"><a class="reference internal" href="HostService%20Reference.html">HostService Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="Io%20image%20raw.html">Io image raw</a></li>
<li class="toctree-l2"><a class="reference internal" href="Io%20scene%20geo.html">Io scene geo</a></li>
<li class="toctree-l2"><a class="reference internal" href="Io%20scene%20hgpl.html">Io scene hgpl</a></li>
<li class="toctree-l2"><a class="reference internal" href="Item%20Command%20Arguments.html">Item Command Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="Item%20gasket.html">Item gasket</a></li>
<li class="toctree-l2"><a class="reference internal" href="Item%20mandelbrot.html">Item mandelbrot</a></li>
<li class="toctree-l2"><a class="reference internal" href="Item%20orb.html">Item orb</a></li>
<li class="toctree-l2"><a class="reference internal" href="Language%20Wrappers.html">Language Wrappers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Mesh%20Operation%20-%20Automatic%20implementation.html">Mesh Operation - Automatic implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Mesh%20Operation%20-%20Example.html">Mesh Operation - Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="Mesh%20Operation%20-%20Manual%20implementation.html">Mesh Operation - Manual implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Modo%20Version%20History.html">Modo Version History</a></li>
<li class="toctree-l2"><a class="reference internal" href="Movie%20cocoaqt.html">Movie cocoaqt</a></li>
<li class="toctree-l2"><a class="reference internal" href="Multiple%20Servers%20in%20One%20Module.html">Multiple Servers in One Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="Network%20Rendering.html">Network Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="Package%20or%20Item%20Type%20(metaclass).html">Package or Item Type (metaclass)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Path%20Aliases.html">Path Aliases</a></li>
<li class="toctree-l2"><a class="reference internal" href="Pattern%20Matching.html">Pattern Matching</a></li>
<li class="toctree-l2"><a class="reference internal" href="PlatformService%20Reference.html">PlatformService Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plug-ins%20vs.%20Scripts.html">Plug-ins vs. Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="Pop-up%20List%20Choice.html">Pop-up List Choice</a></li>
<li class="toctree-l2"><a class="reference internal" href="Preference%20Forms.html">Preference Forms</a></li>
<li class="toctree-l2"><a class="reference internal" href="Prepare_Evaluate%20Protocol.html">Prepare/Evaluate Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="Preset%20Browser%20Filtering.html">Preset Browser Filtering</a></li>
<li class="toctree-l2"><a class="reference internal" href="Preset%20Browser%20Paths.html">Preset Browser Paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="Preview%20Socket.html">Preview Socket</a></li>
<li class="toctree-l2"><a class="reference internal" href="Procedural%20Geometry.html">Procedural Geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python.html">Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python%20API%20Overview.html">Python API Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python%20Command%20Overview.html">Python Command Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python%20Notifier%20Example.html">Python Notifier Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python%20Samples.html">Python Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python%20Treeview%20Example.html">Python Treeview Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="Python%20in%20Modo.html">Python in Modo</a></li>
<li class="toctree-l2"><a class="reference internal" href="Query%20Command%20Values%20example.html">Query Command Values example</a></li>
<li class="toctree-l2"><a class="reference internal" href="RandomSel%20Script.html">RandomSel Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="Reading%20Files%20with%20Python.html">Reading Files with Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="Reading%20Persistant%20Data.html">Reading Persistant Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="Reading%20UV%20Values.html">Reading UV Values in Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="Render%20Frame%20Size.html">Render Frame Size</a></li>
<li class="toctree-l2"><a class="reference internal" href="Scene%20Query.cpp.html">Scene Query.cpp</a></li>
<li class="toctree-l2"><a class="reference internal" href="Select.typeFrom.html">Select.typeFrom</a></li>
<li class="toctree-l2"><a class="reference internal" href="Selection%20Operation%20-%20Automatic%20implementation.html">Selection Operation - Automatic implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Selection%20Operation%20-%20Manual%20implementation.html">Selection Operation - Manual implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Server%20Tags.html">Server Tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="Singleton%20Listener.html">Singleton Listener</a></li>
<li class="toctree-l2"><a class="reference internal" href="Singleton%20Polymorph.html">Singleton Polymorph</a></li>
<li class="toctree-l2"><a class="reference internal" href="Startup%20Commands.html">Startup Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="Symbols%20defined%20in%20the%20lx%20package.html">Symbols defined in the lx package</a></li>
<li class="toctree-l2"><a class="reference internal" href="Texture%20test.html">Texture test</a></li>
<li class="toctree-l2"><a class="reference internal" href="Tool%20spikey.html">Tool spikey</a></li>
<li class="toctree-l2"><a class="reference internal" href="Using%20Loader%20Options.html">Using Loader Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="Writing%20to%20the%20Event%20Log.html">Writing to the Event Log</a></li>
<li class="toctree-l2"><a class="reference internal" href="Writing%20to%20the%20modo%20event%20log%20and%20debugger.html">Writing to the modo event log and debugger</a></li>
<li class="toctree-l2"><a class="reference internal" href="Your%20First%20Tool%20in%20Modo.html">Your First Tool in Modo</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples/_examples.html">Code Examples and Snippets</a></li>
</ul>
<p class="caption"><span class="caption-text">Technical Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../python/python.html">Python Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpp/cpp.html">C++ Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Modo SDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="_tutorials.html">SDK Tutorials</a> &raquo;</li>
        
      <li>Creating a Selection Set</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="creating-a-selection-set">
<h1>Creating a Selection Set<a class="headerlink" href="#creating-a-selection-set" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#localizing-a-mesh-for-editing" id="id4">Localizing a Mesh for Editing</a></p></li>
<li><p><a class="reference internal" href="#id1" id="id5">Creating a Selection Set</a></p></li>
<li><p><a class="reference internal" href="#adding-points-to-the-selection-set" id="id6">Adding Points to the Selection Set</a></p></li>
</ul>
</div>
<div class="section" id="localizing-a-mesh-for-editing">
<h2><a class="toc-backref" href="#id4">Localizing a Mesh for Editing</a><a class="headerlink" href="#localizing-a-mesh-for-editing" title="Permalink to this headline">¶</a></h2>
<p>When you localize a mesh in the API, you need to specify what you’re going to be doing with the mesh in advance.  It may not seem like it, but creating a new vertex map (in this case a selection set) is editing a mesh.  That means we need to localize a mesh object specifically for editing.  This can be done through a ILxLayerScan_(index)#C21.  So the first step is to create a layer scan object.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="n">layerService</span> <span class="o">=</span> <span class="n">lx</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">Layer</span><span class="p">()</span>
  <span class="n">layerScanObject</span> <span class="o">=</span> <span class="n">layerService</span><span class="o">.</span><span class="n">ScanAllocate</span><span class="p">(</span><span class="n">lx</span><span class="o">.</span><span class="n">symbol</span><span class="o">.</span><span class="n">f_LAYERSCAN_EDIT</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Notice that the flag we use when we allocate a layer scan object is ‘lx.symbol.f_LAYERSCAN_EDIT’.  This creates a layerscan object that is capable of making edits, as opposed to some other flags which are specifically used for reading data.  If we take a look at the ILxLayerScan_(index)#.2822.29_SDK:_Declarations (meaning the flags we give when we allocate the object) we can see the flags we can give in the left hand column, and any flags that are implicitly included with it on the right.  Notice that all of the EDIT flags include a WRITEMESH flag and an ACTIVE flag.  The WRITEMESH flag is what gives us the ability to make edits to a mesh, while the ACTIVE flag means that the layerscan object will be capable of localizing all active mesh items.   So now we need to localize an editable mesh.  If we do a quick dir() on our Layer Scan Object, we can see the different methods for localizing meshes:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="nb">dir</span><span class="p">(</span><span class="n">layerScanObject</span><span class="p">)</span>
  <span class="o">-</span><span class="n">Apply</span>
  <span class="o">-</span><span class="n">Count</span>
  <span class="o">-</span><span class="n">GetState</span>
  <span class="o">-</span><span class="n">MeshAction</span>
  <span class="o">-</span><span class="n">MeshBase</span>
  <span class="o">-</span><span class="n">MeshEdit</span>
  <span class="o">-</span><span class="n">MeshInstance</span>
  <span class="o">-</span><span class="n">MeshItem</span>
  <span class="o">-</span><span class="n">SetMeshChange</span>
</pre></div>
</td></tr></table></div>
<p>The MeshAction(), MeshBase(), and MeshEdit() methods will give us a localized mesh in action, base, or editable mode.  The MeshInstance() method will allow us to localize a specific instance of a mesh based on index, and the MeshItem() method will return a generic item object Item_Object.  It’s important to note that because we’re implicitly using the lx.object.f_LAYERSCAN_ACTIVE flag, the layer scan object may have access to more than one mesh.  For our purposes we’ll just use the first available one (the index 0 mesh) but it would probably be better to localize each available mesh (you can check how many are there with the Count() method) and make sure it’s the mesh you want.  We want an editable mesh, so we’ll use the MeshEdit() method to localize our mesh.</p>
<p>NB: It is worth noting that inactive (“background”) mesh layers, cannot be edited and MeshEdit will fail if you attempt to call it on inactive mesh layers. However, you can safely use MeshAction or MeshBase to create read-only access to those meshes.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="n">meshObject</span> <span class="o">=</span> <span class="n">layerScanObject</span><span class="o">.</span><span class="n">MeshEdit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id1">
<h2><a class="toc-backref" href="#id5">Creating a Selection Set</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>What you might not know is that internally, selection sets are vertex maps just like UV Maps, Weight Maps, or Morph Maps.  Because of this, the logical place to look for creating a new vertex map might be in a Mesh Map Accessor.  By doing a quick dir() on our localized mesh, we can see that we can create a Mesh Map Accessor by using the MeshMapAccessor() call.  If we then look at the dir() of the Mesh Map Accessor, we can find a method called New().  So what does it take to create a new mesh map?</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="n">mapAccessor</span> <span class="o">=</span> <span class="n">meshObject</span><span class="o">.</span><span class="n">MeshMapAccessor</span><span class="p">()</span>
  <span class="n">mapAccessor</span><span class="o">.</span><span class="n">New</span><span class="o">.</span><span class="vm">__doc__</span>
  <span class="o">-</span> <span class="nb">id</span> <span class="n">mapID</span> <span class="o">=</span> <span class="n">New</span><span class="p">(</span><span class="n">integer</span> <span class="nb">type</span><span class="p">,</span><span class="n">string</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>So the New() method takes an integer which specifies the type of map, and a string for its name.  It will return this new maps ID.  In dir(lx.symbol) we can find among the integers (symbols starting with lx.symbol.i) symbols for vmaps, and specifically a symbol for pick maps, which is another name for a selection set:  lx.symbol.i_VMAP_PICK</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="n">mapID</span> <span class="o">=</span> <span class="n">mapAccessor</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">lx</span><span class="o">.</span><span class="n">symbol</span><span class="o">.</span><span class="n">i_VMAP_PICK</span><span class="p">,</span> <span class="s2">&quot;Selection Set&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Now we have a new map created, and the ID for that map stored as mapID.  The last thing we need is to tell it which points to select.</p>
</div>
<div class="section" id="adding-points-to-the-selection-set">
<h2><a class="toc-backref" href="#id6">Adding Points to the Selection Set</a><a class="headerlink" href="#adding-points-to-the-selection-set" title="Permalink to this headline">¶</a></h2>
<p>In order to assign points to a pick map, we need to have access to the points.  So let’s create a Mesh_(lx-mesh.hpp)#Point_Accessor.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="n">pointAccessor</span> <span class="o">=</span> <span class="n">meshObject</span><span class="o">.</span><span class="n">PointAccessor</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>In the dir(pointAccessor), we can see a method for setting a points map value, so let’s see what it needs to work.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="n">pointAccessor</span><span class="o">.</span><span class="n">SetMapValue</span><span class="o">.</span><span class="vm">__doc__</span>
  <span class="o">-</span> <span class="n">SetMapValue</span><span class="p">(</span><span class="nb">id</span> <span class="nb">map</span><span class="p">,</span><span class="nb">float</span><span class="p">[]</span> <span class="n">value</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>So we need the id of the map, which we already have, and a float storage object which contains the value we want to set.  When you see [] in the requirements of a method, it denotes a storage object set to the datatype next to it.  Since there’s no point ID in the requirements for this method, it’s safe to assume that we need to use our Point Accessor to select a point before we run the SetMapValue() call.  So let’s create a float storage object, select a point with our accessor, and then run the SetMapValue() method.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="n">storageObject</span> <span class="o">=</span> <span class="n">lx</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">storage</span><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
  <span class="n">pointAccessor</span><span class="o">.</span><span class="n">SelectByIndex</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
  <span class="n">pointAccessor</span><span class="o">.</span><span class="n">SetMapValue</span><span class="p">(</span><span class="n">mapID</span><span class="p">,</span> <span class="n">storageObject</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>As discussed in the Mesh_(lx-mesh.hpp)#Map_Types page, pick maps are dimensionless.  That means that our storage object didn’t need any dimensions (hence the 0 when it was created), and we don’t need to set a value or values for it (using the set() method).  Just feeding it in to our Point Accessor’s SetMapValue() method while a point is selected is enough to add it to the selection set.
<a href="#id2"><span class="problematic" id="id3">*</span></a>Note that when we talk about a point being selected by the Point Accessor, it just means it currently holds the focus of the API, not that the element is selected in modo’s UI.</p>
<p>Since we’ve edited attributes of our mesh, we need to let modo know when we’re finished in a couple of ways.  Since our mesh was localized as an editable mesh (remember our LayerScanObject.MeshEdit(0) call) we need to use the Layer Scan Object’s SetMeshChange() method to tell modo what we did.  We also need to tell our Layer Scan Object that we’re finished editing, and to Apply changes by using the Apply() method.  The Layer Scan Object’s SetMeshChange() method requires the indice of the layer we’ve edited and a flag to tell it what we’ve edited, and we can find these again in the dir(lx.symbol) starting with lx.symbol.f_MESHEDIT.  For this situation, we’re going to use MESHEDIT_MAP_OTHER because there isn’t a specific flag for editing pick maps.  We’ll also call the Apply() method on our Layer Scan Object.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="n">layerScanObject</span><span class="o">.</span><span class="n">SetMeshChange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">lx</span><span class="o">.</span><span class="n">symbol</span><span class="o">.</span><span class="n">f_MESHEDIT_MAP_OTHER</span><span class="p">)</span>
  <span class="n">layerScanObject</span><span class="o">.</span><span class="n">Apply</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>So we now have a selection set which has a single vertex in it.  That’s probably not too useful, so how about we clean this up a little into a function that we can feed a list of elements, a name for the selection set, and it will create a selection set with those elements in it?  Here’s a commented script that does just that.  Almost all of it we have just been through, with the exception of a ‘for’ loop and defined function.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#python</span>
<span class="kn">import</span> <span class="nn">lx</span>

<span class="c1"># We&#39;ll define a function called &#39;createVertSet&#39; that takes two arguments.</span>
<span class="c1"># A list of element indices to make into a selection set, and a string name for the selection set.</span>
<span class="k">def</span> <span class="nf">createVertSet</span><span class="p">(</span><span class="n">elements</span><span class="p">,</span> <span class="n">setName</span><span class="p">):</span>

    <span class="c1"># Localize an editable mesh and create map and point accessors</span>
    <span class="n">layerScan</span> <span class="o">=</span> <span class="n">lx</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">Layer</span><span class="p">()</span><span class="o">.</span><span class="n">ScanAllocate</span><span class="p">(</span><span class="n">lx</span><span class="o">.</span><span class="n">symbol</span><span class="o">.</span><span class="n">f_LAYERSCAN_EDIT</span><span class="p">)</span>
    <span class="n">mesh</span> <span class="o">=</span> <span class="n">layerScan</span><span class="o">.</span><span class="n">MeshEdit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">mapAccessor</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">MeshMapAccessor</span><span class="p">()</span>
    <span class="n">pointAccessor</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">PointAccessor</span><span class="p">()</span>

    <span class="c1"># Create a storage object and a new pick map, then loop through our elements and add them</span>
    <span class="n">storageBuffer</span> <span class="o">=</span> <span class="n">lx</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">storage</span><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">newMap</span> <span class="o">=</span> <span class="n">mapAccessor</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">lx</span><span class="o">.</span><span class="n">symbol</span><span class="o">.</span><span class="n">i_VMAP_PICK</span><span class="p">,</span><span class="n">setName</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">:</span>
        <span class="n">pointAccessor</span><span class="o">.</span><span class="n">SelectByIndex</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">pointAccessor</span><span class="o">.</span><span class="n">SetMapValue</span><span class="p">(</span><span class="n">newMap</span><span class="p">,</span> <span class="n">storageBuffer</span><span class="p">)</span>

    <span class="c1"># Apply our changes in the layerscan object and tell it which layer we made changes to, as well as what changes.</span>
    <span class="n">layerScan</span><span class="o">.</span><span class="n">SetMeshChange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">lx</span><span class="o">.</span><span class="n">symbol</span><span class="o">.</span><span class="n">f_MESHEDIT_MAP_OTHER</span><span class="p">)</span>
    <span class="n">layerScan</span><span class="o">.</span><span class="n">Apply</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="CustomView.html" class="btn btn-neutral float-right" title="CustomView" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Command%20VertValue.html" class="btn btn-neutral float-left" title="Command VertValue" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Foundry

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org/">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>

<!-- Mirrored from learn.foundry.com/modo/developers/latest/sdk/pages/tutorials/Creating a Selection Set.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 30 Nov 2024 03:16:03 GMT -->
</html>