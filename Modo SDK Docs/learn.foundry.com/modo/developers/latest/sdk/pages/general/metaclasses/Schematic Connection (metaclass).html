

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<!-- Mirrored from learn.foundry.com/modo/developers/latest/sdk/pages/general/metaclasses/Schematic Connection (metaclass).html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 30 Nov 2024 03:15:53 GMT -->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Schematic Connection (metaclass) &mdash; Modo SDK 14.2v0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script src="../../../_static/js/contentui.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Value Texture (metaclass)" href="Value%20Texture%20(metaclass).html" />
    <link rel="prev" title="Eval Modifier (metaclass)" href="Eval%20Modifier%20(metaclass).html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Modo SDK
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="https://learn.foundry.com/modo/developers/latest/sdk/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Articles</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../starting/_starting.html">First Steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../server_basics/_server_basics.html">Server Basics</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../_general.html">Editorial Info</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../_general.html#general-info">General Info</a></li>
<li class="toctree-l2"><a class="reference internal" href="../_general.html#underlying-systems">Underlying Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../_general.html#interface-details">Interface Details</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../_general.html#metaclasses">MetaClasses</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="About%20Metaclasses.html">About Metaclasses</a></li>
<li class="toctree-l3"><a class="reference internal" href="Channel%20Modifier%20(metaclass).html">Channel Modifier (metaclass)</a></li>
<li class="toctree-l3"><a class="reference internal" href="Channels%20(metaclass).html">Channels (metaclass)</a></li>
<li class="toctree-l3"><a class="reference internal" href="Eval%20Modifier%20(metaclass).html">Eval Modifier (metaclass)</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Schematic Connection (metaclass)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#basics">Basics</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dynamic-items">Dynamic Items</a></li>
<li class="toctree-l4"><a class="reference internal" href="#manual-linkages">Manual Linkages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Value%20Texture%20(metaclass).html">Value Texture (metaclass)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../_general.html#additional-resources">Additional Resources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../ui/_ui.html">User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scripting/_scripting.html">Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faqs/_faqs.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption"><span class="caption-text">Code Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/_tutorials.html">SDK Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/_examples.html">Code Examples and Snippets</a></li>
</ul>
<p class="caption"><span class="caption-text">Technical Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../python/python.html">Python Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cpp/cpp.html">C++ Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Modo SDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../_general.html">Editorial Info</a> &raquo;</li>
        
      <li>Schematic Connection (metaclass)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="schematic-connection-metaclass">
<h1>Schematic Connection (metaclass)<a class="headerlink" href="#schematic-connection-metaclass" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#basics" id="id1">Basics</a></p></li>
<li><p><a class="reference internal" href="#dynamic-items" id="id2">Dynamic Items</a></p></li>
<li><p><a class="reference internal" href="#manual-linkages" id="id3">Manual Linkages</a></p></li>
</ul>
</div>
<p>A standalone SchematicConnection server can be declared as a metaclass.</p>
<div class="section" id="basics">
<h2><a class="toc-backref" href="#id1">Basics</a><a class="headerlink" href="#basics" title="Permalink to this headline">¶</a></h2>
<p>The most simple example adds the connection point to all items of a given type, and allows all other items to connect to it through a named graph. Optional arguments on the metaclass configuration methods allow the graph to be reversed, and the connection point to support multiple or ordered connections.</p>
<div class="highlight-cpp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">static</span> <span class="n">CLxMeta_SchematicConnection</span><span class="o">&lt;</span><span class="n">CLxSchematicConnection</span><span class="o">&gt;</span>       <span class="n">schm_meta</span> <span class="p">(</span><span class="s">&quot;mySchematicConnectionServerName&quot;</span><span class="p">);</span>

        <span class="kt">void</span>
<span class="nf">initialize</span> <span class="p">()</span>
<span class="p">{</span>
        <span class="n">schm_meta</span><span class="p">.</span><span class="n">set_graph</span> <span class="p">(</span><span class="n">GRAPH_NAME</span><span class="p">);</span>
        <span class="n">schm_meta</span><span class="p">.</span><span class="n">set_itemtype</span> <span class="p">(</span><span class="n">ITEMTYPE_NAME</span><span class="p">);</span>
        <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Since probably not every item should be able to connect it’s common to subclass and override the <em>allow()</em> method:</p>
<div class="highlight-cpp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MySchematicConnection</span> <span class="o">:</span> <span class="k">public</span> <span class="n">CLxSchematicConnection</span>
<span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>
                <span class="kt">bool</span>
        <span class="n">allow</span> <span class="p">(</span>
                <span class="n">CLxUser_Item</span>            <span class="o">&amp;</span><span class="n">from</span><span class="p">,</span>
                <span class="n">CLxUser_Item</span>            <span class="o">&amp;</span><span class="n">to</span><span class="p">)</span>         <span class="n">LXx_OVERRIDE</span>
        <span class="p">{</span>
                <span class="p">...</span>
        <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="n">CLxMeta_SchematicConnection</span><span class="o">&lt;</span><span class="n">MySchematicConnection</span><span class="o">&gt;</span>        <span class="n">schm_meta</span> <span class="p">(</span><span class="s">&quot;mySchematicConnectionServerName&quot;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="dynamic-items">
<h2><a class="toc-backref" href="#id2">Dynamic Items</a><a class="headerlink" href="#dynamic-items" title="Permalink to this headline">¶</a></h2>
<p>If an item type is set (or if one is inferred from a Package metaclass) then there will be a connection on every item of the given type. If a different behavior is desired – such as allowing the connection on items of disparate types, or allowing the connection on a subset of items of the same type based on tags or packages – then the metaclass can be set to dynamic:</p>
<div class="highlight-cpp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>        <span class="n">schm_meta</span><span class="p">.</span><span class="n">set_dynamic</span> <span class="p">();</span>
</pre></div>
</td></tr></table></div>
<p>When this is set the <em>test_item()</em> method of the overridden CLxSchematicConnection class must call <em>set_single()</em> or <em>set_multiple()</em> for item that should have connection points. If neither method is called then the item will not have that connection.</p>
<div class="highlight-cpp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span>                <span class="kt">void</span>
        <span class="nf">test_item</span> <span class="p">(</span>
                <span class="n">CLxUser_Item</span>            <span class="o">&amp;</span><span class="n">item</span><span class="p">)</span>      <span class="n">LXx_OVERRIDE</span>
        <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">item</span><span class="o">-</span><span class="n">can</span><span class="o">-</span><span class="n">have</span><span class="o">-</span><span class="n">connection</span><span class="p">)</span>
                <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">item</span><span class="o">-</span><span class="n">supports</span><span class="o">-</span><span class="n">multiple</span><span class="o">-</span><span class="n">inputs</span><span class="p">)</span>
                                <span class="n">set_single</span> <span class="p">();</span>
                        <span class="k">else</span>
                                <span class="n">set_multiple</span> <span class="p">();</span>
                <span class="p">}</span>
        <span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>The schematic viewport caches the state of items for performance, so adding or removing a connection from a specific item requires that the cached state be invalidated. That can be done with the <em>invalidate()</em> method on the metaclass.</p>
<div class="highlight-cpp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>        <span class="n">schm_meta</span><span class="p">.</span><span class="n">invalidate</span> <span class="p">();</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="manual-linkages">
<h2><a class="toc-backref" href="#id3">Manual Linkages</a><a class="headerlink" href="#manual-linkages" title="Permalink to this headline">¶</a></h2>
<p>Schematic can also manage relationships other than graphs. This is done by setting the metaclass to manual mode (which is the default if no graph is specified). This requires three more methods of the base class be overridden by the connection. The first gets the list of items attached to this item. The other two make the changes when links are added or removed.</p>
<div class="highlight-cpp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span></span>                <span class="kt">void</span>
        <span class="nf">get_list</span> <span class="p">(</span>
                <span class="n">CLxUser_Item</span>            <span class="o">&amp;</span><span class="n">item</span><span class="p">)</span>          <span class="n">LXx_OVERRIDE</span>
        <span class="p">{</span>
                <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">item</span><span class="o">-</span><span class="n">count</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
                        <span class="n">add_item</span> <span class="p">(</span><span class="n">item</span><span class="o">-</span><span class="n">list</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="p">}</span>

                <span class="kt">void</span>
        <span class="nf">connect</span> <span class="p">(</span>
                <span class="n">CLxUser_Item</span>            <span class="o">&amp;</span><span class="n">from</span><span class="p">,</span>
                <span class="n">CLxUser_Item</span>            <span class="o">&amp;</span><span class="n">to</span><span class="p">,</span>
                <span class="kt">int</span>                      <span class="n">toIndex</span><span class="p">)</span>       <span class="n">LXx_OVERRIDE</span>
        <span class="p">{</span>
                <span class="p">...</span>
        <span class="p">}</span>

                <span class="kt">void</span>
        <span class="nf">disconnect</span> <span class="p">(</span>
                <span class="n">CLxUser_Item</span>            <span class="o">&amp;</span><span class="n">from</span><span class="p">,</span>
                <span class="n">CLxUser_Item</span>            <span class="o">&amp;</span><span class="n">to</span><span class="p">)</span>            <span class="n">LXx_OVERRIDE</span>
        <span class="p">{</span>
                <span class="p">...</span>
        <span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Value%20Texture%20(metaclass).html" class="btn btn-neutral float-right" title="Value Texture (metaclass)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Eval%20Modifier%20(metaclass).html" class="btn btn-neutral float-left" title="Eval Modifier (metaclass)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Foundry

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org/">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>

<!-- Mirrored from learn.foundry.com/modo/developers/latest/sdk/pages/general/metaclasses/Schematic Connection (metaclass).html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 30 Nov 2024 03:15:53 GMT -->
</html>