

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<!-- Mirrored from learn.foundry.com/modo/developers/latest/sdk/pages/general/metaclasses/Channel Modifier (metaclass).html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 30 Nov 2024 03:15:53 GMT -->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Channel Modifier (metaclass) &mdash; Modo SDK 14.2v0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script src="../../../_static/js/contentui.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Channels (metaclass)" href="Channels%20(metaclass).html" />
    <link rel="prev" title="About Metaclasses" href="About%20Metaclasses.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Modo SDK
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="https://learn.foundry.com/modo/developers/latest/sdk/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Articles</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../starting/_starting.html">First Steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../server_basics/_server_basics.html">Server Basics</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../_general.html">Editorial Info</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../_general.html#general-info">General Info</a></li>
<li class="toctree-l2"><a class="reference internal" href="../_general.html#underlying-systems">Underlying Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../_general.html#interface-details">Interface Details</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../_general.html#metaclasses">MetaClasses</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="About%20Metaclasses.html">About Metaclasses</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Channel Modifier (metaclass)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sample">Sample</a></li>
<li class="toctree-l4"><a class="reference internal" href="#other-bindings">Other Bindings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Channels%20(metaclass).html">Channels (metaclass)</a></li>
<li class="toctree-l3"><a class="reference internal" href="Eval%20Modifier%20(metaclass).html">Eval Modifier (metaclass)</a></li>
<li class="toctree-l3"><a class="reference internal" href="Schematic%20Connection%20(metaclass).html">Schematic Connection (metaclass)</a></li>
<li class="toctree-l3"><a class="reference internal" href="Value%20Texture%20(metaclass).html">Value Texture (metaclass)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../_general.html#additional-resources">Additional Resources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../ui/_ui.html">User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scripting/_scripting.html">Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faqs/_faqs.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption"><span class="caption-text">Code Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/_tutorials.html">SDK Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/_examples.html">Code Examples and Snippets</a></li>
</ul>
<p class="caption"><span class="caption-text">Technical Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../python/python.html">Python Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cpp/cpp.html">C++ Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Modo SDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../_general.html">Editorial Info</a> &raquo;</li>
        
      <li>Channel Modifier (metaclass)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="channel-modifier-metaclass">
<h1>Channel Modifier (metaclass)<a class="headerlink" href="#channel-modifier-metaclass" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#sample" id="id1">Sample</a></p></li>
<li><p><a class="reference internal" href="#other-bindings" id="id2">Other Bindings</a></p></li>
</ul>
</div>
<p>The channel modifier SDK has been completely overhauled for MODO 10. Old channel modifiers will still function exactly as before and can continue to be compiled with the updated SDK, but new modifiers should use the improved SDK. This metaclass supports creating C++ channel modifiers.</p>
<div class="section" id="sample">
<h2><a class="toc-backref" href="#id1">Sample</a><a class="headerlink" href="#sample" title="Permalink to this headline">¶</a></h2>
<p>This example is a C++ channel modifier that takes one input float and outputs twice that value. The client’s code is a sub-class of <em>CLxChannelModifier</em> which declares the channels for the modifier in <strong>init_chan()</strong> (derived from ‘’CLxChannels’’) and performs the computation in <strong>eval()</strong> (derived from ‘’CLxChannelModManager’’). The wrapper code binds the channels to the Value objects in the class which can be read and written during evaluation.</p>
<div class="highlight-cpp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">COperator</span> <span class="o">:</span>
                <span class="k">public</span> <span class="n">CLxChannelModifier</span>
<span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>
        <span class="n">CLxUser_Value</span>            <span class="n">v_input</span><span class="p">,</span> <span class="n">v_output</span><span class="p">;</span>

                <span class="kt">void</span>
        <span class="nf">init_chan</span> <span class="p">(</span>
                <span class="n">CLxAttributeDesc</span>        <span class="o">&amp;</span><span class="n">desc</span><span class="p">)</span>
        <span class="p">{</span>
                <span class="n">COperator</span>               <span class="o">*</span><span class="n">op</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

                <span class="n">desc</span><span class="p">.</span><span class="n">add</span> <span class="p">(</span><span class="s">&quot;input&quot;</span><span class="p">,</span> <span class="n">LXsTYPE_FLOAT</span><span class="p">);</span>
                <span class="n">desc</span><span class="p">.</span><span class="n">chanmod_chan</span> <span class="p">(</span><span class="n">LXfCHMOD_INPUT</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">op</span><span class="o">-&gt;</span><span class="n">v_input</span><span class="p">);</span>

                <span class="n">desc</span><span class="p">.</span><span class="n">add</span> <span class="p">(</span><span class="s">&quot;output&quot;</span><span class="p">,</span> <span class="n">LXsTYPE_FLOAT</span><span class="p">);</span>
                <span class="n">desc</span><span class="p">.</span><span class="n">chanmod_chan</span> <span class="p">(</span><span class="n">LXfCHMOD_OUTPUT</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">op</span><span class="o">-&gt;</span><span class="n">v_output</span><span class="p">);</span>
        <span class="p">}</span>

                <span class="kt">void</span>
        <span class="nf">eval</span> <span class="p">()</span>
        <span class="p">{</span>
                <span class="kt">double</span>           <span class="n">val</span><span class="p">;</span>

                <span class="n">v_input</span><span class="p">.</span><span class="n">GetFlt</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">val</span><span class="p">);</span>
                <span class="n">v_output</span><span class="p">.</span><span class="n">SetFlt</span> <span class="p">(</span><span class="n">val</span> <span class="o">*</span> <span class="mf">2.0</span><span class="p">);</span>
        <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="n">CLxMetaRoot_ChannelModifier</span><span class="o">&lt;</span><span class="n">COperator</span><span class="o">&gt;</span>    <span class="n">meta</span> <span class="p">(</span><span class="s">&quot;cmDoubler&quot;</span><span class="p">);</span>

        <span class="kt">void</span>
<span class="nf">initialize</span> <span class="p">()</span>
<span class="p">{</span>
        <span class="n">meta</span><span class="p">.</span><span class="n">initialize</span> <span class="p">();</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Some things to note. In defining channels we use the <em>chanmod_chan()</em> method. That associates value objects with channels for binding. The metaclass is actually a composite, consisting of a Channels metaclass and a ChannelModManager metaclass assembled into a subtree. We also use the <em>CLxMetaRoot_ChannelModifier</em> template rather than ‘’CLxMeta_ChannelModifier’’. This just saves us a step and creates all the relevant metaclasses under a root which can just be initialized directly without needing to be added.</p>
</div>
<div class="section" id="other-bindings">
<h2><a class="toc-backref" href="#id2">Other Bindings</a><a class="headerlink" href="#other-bindings" title="Permalink to this headline">¶</a></h2>
<p>In addition to Value objects, input channels can also be bound to ValueArray objects, allowing multi-link channels to be read individually.</p>
<div class="highlight-cpp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span>        <span class="n">CLxUser_ValueArray</span>       <span class="n">v_multi</span><span class="p">;</span>
        <span class="p">[...]</span>
                <span class="n">desc</span><span class="p">.</span><span class="n">add</span> <span class="p">(</span><span class="s">&quot;multi&quot;</span><span class="p">,</span> <span class="n">LXsTYPE_FLOAT</span><span class="p">);</span>
                <span class="n">desc</span><span class="p">.</span><span class="n">chanmod_chan</span> <span class="p">(</span><span class="n">LXfCHMOD_INPUT</span> <span class="o">|</span> <span class="n">LXfCHMOD_MULTILINK</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">op</span><span class="o">-&gt;</span><span class="n">v_multi</span><span class="p">);</span>
        <span class="p">[...]</span>
                <span class="n">v_multi</span><span class="p">.</span><span class="n">Count</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">n</span><span class="p">);</span>
                <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                        <span class="n">v_multi</span><span class="p">.</span><span class="n">GetFloat</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">val</span><span class="p">);</span>
                        <span class="n">sum</span> <span class="o">+=</span> <span class="n">val</span><span class="p">;</span>
                <span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Channels can also be bound to Matrix objects, and writing to a Matrix output now automatically propagates to all outputs so only a single result needs to be generated.</p>
<div class="highlight-cpp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span>        <span class="n">CLxUser_Matrix</span>   <span class="n">v_matrix</span><span class="p">;</span>
        <span class="p">[...]</span>
                <span class="n">desc</span><span class="p">.</span><span class="n">add</span> <span class="p">(</span><span class="s">&quot;outMat&quot;</span><span class="p">,</span> <span class="n">LXsTYPE_MATRIX4</span><span class="p">);</span>
                <span class="n">desc</span><span class="p">.</span><span class="n">chanmod_chan</span> <span class="p">(</span><span class="n">LXfCHMOD_OUTPUT</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">op</span><span class="o">-&gt;</span><span class="n">v_matrix</span><span class="p">);</span>
        <span class="p">[...]</span>
                <span class="n">v_matrix</span><span class="p">.</span><span class="n">Set4</span> <span class="p">(</span><span class="n">resultMatrix</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>Channel modifiers can also read from time. There’s no channel needed for this, just a float to get the result.</p>
<div class="highlight-cpp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span>        <span class="n">CLxUser_Value</span>    <span class="n">v_time</span><span class="p">;</span>
        <span class="p">[...]</span>
                <span class="n">desc</span><span class="p">.</span><span class="n">chanmod_time</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">op</span><span class="o">-&gt;</span><span class="n">v_time</span><span class="p">);</span>
        <span class="p">[...]</span>
                <span class="kt">double</span> <span class="n">t</span><span class="p">;</span>
                <span class="n">v_time</span><span class="p">.</span><span class="n">GetFlt</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">t</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Channels%20(metaclass).html" class="btn btn-neutral float-right" title="Channels (metaclass)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="About%20Metaclasses.html" class="btn btn-neutral float-left" title="About Metaclasses" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Foundry

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org/">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>

<!-- Mirrored from learn.foundry.com/modo/developers/latest/sdk/pages/general/metaclasses/Channel Modifier (metaclass).html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 30 Nov 2024 03:15:53 GMT -->
</html>