

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<!-- Mirrored from learn.foundry.com/modo/developers/latest/sdk/pages/faqs/ModifierFAQ.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 30 Nov 2024 03:16:00 GMT -->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Modifiers &mdash; Modo SDK 14.2v0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/js/contentui.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Python Specific" href="PythonFAQs.html" />
    <link rel="prev" title="Meshes" href="MeshFAQ.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Modo SDK
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="https://learn.foundry.com/modo/developers/latest/sdk/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Articles</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../starting/_starting.html">First Steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server_basics/_server_basics.html">Server Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/_general.html">Editorial Info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ui/_ui.html">User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scripting/_scripting.html">Scripting</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="_faqs.html">Frequently Asked Questions</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="COMFAQs.html">About COM</a></li>
<li class="toctree-l2"><a class="reference internal" href="ChannelFAQs.html">Channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="CppFAQs.html">C++ Specific</a></li>
<li class="toctree-l2"><a class="reference internal" href="GeneralFAQ.html">General</a></li>
<li class="toctree-l2"><a class="reference internal" href="ItemFAQs.html">Items</a></li>
<li class="toctree-l2"><a class="reference internal" href="MeshFAQ.html">Meshes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Modifiers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#my-plugin-has-a-modifier-and-an-item-instance-with-an-item-drawing-interface-how-can-i-get-the-modifier-object-inside-the-instance-s-methods">My plugin has a modifier and an item instance with an item drawing interface. How can I get the modifier object inside the instance’s methods?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-can-my-channel-modifier-read-inputs-at-different-times">How can my channel modifier read inputs at different times?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#can-my-modifier-read-from-the-setup-action">Can my modifier read from the setup action?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#why-won-t-my-channel-modifier-write-a-matrix">Why won’t my channel modifier write a matrix?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-can-i-make-sure-modifier-is-evaluated-for-every-time-change">How can I make sure modifier is evaluated for every time change?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="PythonFAQs.html">Python Specific</a></li>
<li class="toctree-l2"><a class="reference internal" href="SelectionFAQ.html">General</a></li>
<li class="toctree-l2"><a class="reference internal" href="TimeFAQs.html">Dealing with Time</a></li>
<li class="toctree-l2"><a class="reference internal" href="UIFAQ.html">User Interface</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Code Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/_tutorials.html">SDK Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/_examples.html">Code Examples and Snippets</a></li>
</ul>
<p class="caption"><span class="caption-text">Technical Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../python/python.html">Python Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpp/cpp.html">C++ Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Modo SDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="_faqs.html">Frequently Asked Questions</a> &raquo;</li>
        
      <li>Modifiers</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="modifiers">
<h1>Modifiers<a class="headerlink" href="#modifiers" title="Permalink to this headline">¶</a></h1>
<div class="section" id="my-plugin-has-a-modifier-and-an-item-instance-with-an-item-drawing-interface-how-can-i-get-the-modifier-object-inside-the-instance-s-methods">
<h2>My plugin has a modifier and an item instance with an item drawing interface. How can I get the modifier object inside the instance’s methods?<a class="headerlink" href="#my-plugin-has-a-modifier-and-an-item-instance-with-an-item-drawing-interface-how-can-i-get-the-modifier-object-inside-the-instance-s-methods" title="Permalink to this headline">¶</a></h2>
<p>Read the modifier object from the appropriate item channel, and convert:</p>
<div class="content-tabs docutils container">
<div class="tab-content docutils container" id="tab-cpp">
<p class="tab-title">C++</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">CLxUser_ValueReference</span>   <span class="n">ref</span><span class="p">;</span>
<span class="n">LXtObjectID</span>              <span class="n">obj</span><span class="p">;</span>

<span class="n">chan</span><span class="p">.</span><span class="n">Object</span> <span class="p">(</span><span class="n">m_item</span><span class="p">,</span> <span class="s">&quot;myModifierObjectChannelName&quot;</span><span class="p">,</span> <span class="n">ref</span><span class="p">);</span>
<span class="n">ref</span><span class="p">.</span><span class="n">GetObject</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">obj</span><span class="p">);</span>

<span class="n">CLxSpawner</span><span class="o">&lt;</span><span class="n">MyModifierClass</span><span class="o">&gt;</span>      <span class="n">spawner</span> <span class="p">(</span><span class="s">&quot;myModSpawnName&quot;</span><span class="p">);</span>
<span class="n">MyModifierClass</span>         <span class="o">*</span><span class="n">mod</span><span class="p">;</span>

<span class="n">mod</span> <span class="o">=</span> <span class="n">spawner</span><span class="p">.</span><span class="n">Cast</span> <span class="p">((</span><span class="n">ILxUnknownID</span><span class="p">)</span><span class="n">obj</span><span class="p">);</span>

 <span class="c1">// Do stuff to draw modifier here</span>

<span class="n">lx</span><span class="o">::</span><span class="n">ObjRelease</span> <span class="p">(</span><span class="n">obj</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="how-can-my-channel-modifier-read-inputs-at-different-times">
<h2>How can my channel modifier read inputs at different times?<a class="headerlink" href="#how-can-my-channel-modifier-read-inputs-at-different-times" title="Permalink to this headline">¶</a></h2>
<p>This is done by using methods on the Evaluation Interface. You need to cache this interface as part of your member data in your Allocate() method.</p>
<div class="content-tabs docutils container">
<div class="tab-content docutils container" id="tab-cpp">
<p class="tab-title">C++</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span>                <span class="n">LxResult</span>
<span class="n">CTimeOffset</span><span class="o">::</span><span class="n">cmod_Allocate</span> <span class="p">(</span>
                <span class="n">ILxUnknownID</span>             <span class="n">cmod</span><span class="p">,</span>
                <span class="n">ILxUnknownID</span>             <span class="n">eval</span><span class="p">,</span>
                <span class="n">ILxUnknownID</span>             <span class="n">item</span><span class="p">,</span>
                <span class="kt">void</span>                   <span class="o">**</span><span class="n">ppvData</span><span class="p">)</span>
<span class="p">{</span>
                <span class="n">m_eval</span><span class="p">.</span><span class="n">set</span> <span class="p">(</span><span class="n">eval</span><span class="p">);</span>
                <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Then in the Evaluate() method you read the channels you want at the current time first (in this case the current time and an offset time value), then set the evaluation for an alternate time and read other inputs.</p>
<div class="content-tabs docutils container">
<div class="tab-content docutils container" id="tab-cpp">
<p class="tab-title">C++</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span>                <span class="n">LxResult</span>
<span class="n">CTimeOffset</span><span class="o">::</span><span class="n">cmod_Evaluate</span> <span class="p">(</span>
                <span class="n">ILxUnknownID</span>             <span class="n">cmod</span><span class="p">,</span>
                <span class="n">ILxUnknownID</span>             <span class="n">attr</span><span class="p">,</span>
                <span class="kt">void</span>                    <span class="o">*</span><span class="n">data</span><span class="p">)</span>
<span class="p">{</span>
                <span class="n">CLxLoc_ChannelModifier</span>   <span class="nf">chanMod</span> <span class="p">(</span><span class="n">cmod</span><span class="p">);</span>
                <span class="kt">double</span>                   <span class="n">time</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">value</span><span class="p">;</span>

                <span class="n">chanMod</span><span class="p">.</span><span class="n">ReadInputFloat</span> <span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">INDEX_TIME</span><span class="p">,</span>   <span class="o">&amp;</span><span class="n">time</span><span class="p">);</span>
                <span class="n">chanMod</span><span class="p">.</span><span class="n">ReadInputFloat</span> <span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">INDEX_OFFSET</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dt</span><span class="p">);</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">dt</span><span class="p">)</span>
                                <span class="n">m_eval</span><span class="p">.</span><span class="n">SetAlternateTime</span> <span class="p">(</span><span class="n">time</span> <span class="o">+</span> <span class="n">dt</span><span class="p">);</span>

                <span class="n">chanMod</span><span class="p">.</span><span class="n">ReadInputFloat</span> <span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">INDEX_INPUT</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">value</span><span class="p">);</span>
                <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="can-my-modifier-read-from-the-setup-action">
<h2>Can my modifier read from the setup action?<a class="headerlink" href="#can-my-modifier-read-from-the-setup-action" title="Permalink to this headline">¶</a></h2>
<p>Yes. It’s the same process as in the previous answer, but using Evaluation::SetAlternateSetup().</p>
<div class="content-tabs docutils container">
<div class="tab-content docutils container" id="tab-cpp">
<p class="tab-title">C++</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">m_eval</span><span class="p">.</span><span class="n">SetAlternateSetup</span> <span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<p>If you want to clear the alternate and read from the current time and action again, use ClearAlternate().</p>
<div class="content-tabs docutils container">
<div class="tab-content docutils container" id="tab-cpp">
<p class="tab-title">C++</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">m_eval</span><span class="p">.</span><span class="n">ClearAlternate</span>  <span class="p">();</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="why-won-t-my-channel-modifier-write-a-matrix">
<h2>Why won’t my channel modifier write a matrix?<a class="headerlink" href="#why-won-t-my-channel-modifier-write-a-matrix" title="Permalink to this headline">¶</a></h2>
<p>If you’re trying to write a matrix in a channel modifier, you might try something like this:</p>
<div class="content-tabs docutils container">
<div class="tab-content docutils container" id="tab-cpp">
<p class="tab-title">C++</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">chanMod</span><span class="p">.</span><span class="n">WriteOutputVal</span> <span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="kt">void</span> <span class="o">**</span><span class="p">)(</span><span class="o">&amp;</span><span class="n">outMatrixPtr</span><span class="p">));</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                 <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                                  <span class="p">(</span><span class="o">*</span><span class="n">outMatrixPtr</span><span class="p">)[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
                 <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>which wouldn’t work. For whatever reason, if you want to write to matrix outputs, you need to write to every link individually. So your code would need to look like this:</p>
<div class="content-tabs docutils container">
<div class="tab-content docutils container" id="tab-cpp">
<p class="tab-title">C++</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">chanMod</span><span class="p">.</span><span class="n">OutputCount</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">outCount</span><span class="p">);</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="n">idx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">idx</span> <span class="o">&lt;</span> <span class="n">outCount</span><span class="p">;</span> <span class="n">idx</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                 <span class="n">chanMod</span><span class="p">.</span><span class="n">WriteOutputValByIndex</span> <span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="p">(</span><span class="kt">void</span> <span class="o">**</span><span class="p">)(</span><span class="o">&amp;</span><span class="n">outMatrixPtr</span><span class="p">));</span>
                                  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                                                   <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                                                                        <span class="p">(</span><span class="o">*</span><span class="n">outMatrixPtr</span><span class="p">)[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
                                                   <span class="p">}</span>
                                  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="how-can-i-make-sure-modifier-is-evaluated-for-every-time-change">
<h2>How can I make sure modifier is evaluated for every time change?<a class="headerlink" href="#how-can-i-make-sure-modifier-is-evaluated-for-every-time-change" title="Permalink to this headline">¶</a></h2>
<p>Time can be allocated as an input for the modifier. As changes to input channels invalidates modifiers and causes them to be re-evaluated, allocating time as an input to the modifier will cause the modifier to be invalidated and re-evaluated whenever time changes.</p>
<p>Allocate time as an input channel:</p>
<div class="content-tabs docutils container">
<div class="tab-content docutils container" id="tab-cpp">
<p class="tab-title">C++</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">CLxUser_Evaluation</span>       <span class="nf">ev</span> <span class="p">(</span><span class="n">eval</span><span class="p">);</span>
<span class="n">idx_currentTime</span> <span class="o">=</span> <span class="n">ev</span><span class="p">.</span><span class="n">AddTime</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<p>In the modifier Evaluate function, read the current time.</p>
<div class="content-tabs docutils container">
<div class="tab-content docutils container" id="tab-cpp">
<p class="tab-title">C++</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">CLxUser_Attributes</span>       <span class="nf">at</span> <span class="p">(</span><span class="n">attr</span><span class="p">);</span>
<span class="kt">double</span> <span class="n">currentTime</span> <span class="o">=</span> <span class="n">at</span><span class="p">.</span><span class="n">Float</span><span class="p">(</span><span class="n">idx_currentTime</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="PythonFAQs.html" class="btn btn-neutral float-right" title="Python Specific" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="MeshFAQ.html" class="btn btn-neutral float-left" title="Meshes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Foundry

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org/">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>

<!-- Mirrored from learn.foundry.com/modo/developers/latest/sdk/pages/faqs/ModifierFAQ.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 30 Nov 2024 03:16:00 GMT -->
</html>