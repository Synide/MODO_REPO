

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<!-- Mirrored from learn.foundry.com/modo/developers/latest/sdk/pages/ui/User Values.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 30 Nov 2024 03:16:00 GMT -->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>User Values &mdash; Modo SDK 14.2v0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/js/contentui.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Scripting" href="../scripting/_scripting.html" />
    <link rel="prev" title="User Interface and Plug-Ins" href="User%20Interface%20and%20Plug-Ins.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Modo SDK
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="https://learn.foundry.com/modo/developers/latest/sdk/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Articles</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../starting/_starting.html">First Steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server_basics/_server_basics.html">Server Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/_general.html">Editorial Info</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="_ui.html">User Interface</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="App.undoSuspend.html">App.undoSuspend</a></li>
<li class="toctree-l2"><a class="reference internal" href="Argument%20Types.html">Argument Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="Collapsable%20and%20Hideable%20Viewports.html">Collapsable and Hideable Viewports</a></li>
<li class="toctree-l2"><a class="reference internal" href="Command%20Dialog%20Formatting.html">Command Dialog Formatting</a></li>
<li class="toctree-l2"><a class="reference internal" href="Command%20Help.html">Command Help</a></li>
<li class="toctree-l2"><a class="reference internal" href="Command%20History%20Viewport.html">Command History Viewport</a></li>
<li class="toctree-l2"><a class="reference internal" href="Create%20A%20Custom%20Form.html">Create A Custom Form</a></li>
<li class="toctree-l2"><a class="reference internal" href="Creating%20Layouts.html">Creating Layouts</a></li>
<li class="toctree-l2"><a class="reference internal" href="Defining%20Item%20Categories.html">Defining Item Categories</a></li>
<li class="toctree-l2"><a class="reference internal" href="Dialog%20Commands.html">Dialog Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="Event%20Log%20Viewport.html">Event Log Viewport</a></li>
<li class="toctree-l2"><a class="reference internal" href="Form%20Categories%20and%20Groups.html">Form Categories and Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="Form%20Editor.html">Form Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="Form%20Filtering.html">Form Filtering</a></li>
<li class="toctree-l2"><a class="reference internal" href="Form%20System.html">Form System</a></li>
<li class="toctree-l2"><a class="reference internal" href="Help%20URLs.html">Help URLs</a></li>
<li class="toctree-l2"><a class="reference internal" href="Icon%20Resources.html">Icon Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="Layout%20Windows.html">Layout Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="MODO%20Projects.html">MODO Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="MessageService%20Reference.html">MessageService Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="Modo%20Markup.html">Modo Markup</a></li>
<li class="toctree-l2"><a class="reference internal" href="User%20Interface%20and%20Plug-Ins.html">User Interface and Plug-Ins</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">User Values</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#user-value">user.value</a></li>
<li class="toctree-l3"><a class="reference internal" href="#defining">Defining</a></li>
<li class="toctree-l3"><a class="reference internal" href="#user-value-lifespan">User Value Lifespan</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#config">Config</a></li>
<li class="toctree-l4"><a class="reference internal" href="#temporary">Temporary</a></li>
<li class="toctree-l4"><a class="reference internal" href="#momentary">Momentary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#changing-and-querying-values">Changing and Querying Values</a></li>
<li class="toctree-l3"><a class="reference internal" href="#editing-definition-properties">Editing Definition Properties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#human-readable-labels">Human-Readable Labels</a></li>
<li class="toctree-l4"><a class="reference internal" href="#command-dialog-name">Command Dialog Name</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fixed-ranges">Fixed Ranges</a></li>
<li class="toctree-l4"><a class="reference internal" href="#datatype">Datatype</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id1">Transient</a></li>
<li class="toctree-l4"><a class="reference internal" href="#choices">Choices</a></li>
<li class="toctree-l4"><a class="reference internal" href="#value-presets">Value Presets</a></li>
<li class="toctree-l4"><a class="reference internal" href="#responding-to-value-changes">Responding to Value Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#delaying-the-action">Delaying the Action</a></li>
<li class="toctree-l4"><a class="reference internal" href="#enabling-or-disabling">Enabling or Disabling</a></li>
<li class="toctree-l4"><a class="reference internal" href="#notifiers">Notifiers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#default-values">Default Values</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ui-vs-undoable-user-values">UI vs. Undoable User Values</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#creating-mutually-exclusive-or-toggle-buttons">Creating Mutually Exclusive or Toggle Buttons</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-user-values-from-within-scripts">Creating User Values From Within Scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#more-information">More Information</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../scripting/_scripting.html">Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faqs/_faqs.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption"><span class="caption-text">Code Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/_tutorials.html">SDK Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/_examples.html">Code Examples and Snippets</a></li>
</ul>
<p class="caption"><span class="caption-text">Technical Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../python/python.html">Python Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpp/cpp.html">C++ Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Modo SDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="_ui.html">User Interface</a> &raquo;</li>
        
      <li>User Values</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="user-values">
<h1>User Values<a class="headerlink" href="#user-values" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#user-value" id="id2">user.value</a></p></li>
<li><p><a class="reference internal" href="#defining" id="id3">Defining</a></p></li>
<li><p><a class="reference internal" href="#user-value-lifespan" id="id4">User Value Lifespan</a></p>
<ul>
<li><p><a class="reference internal" href="#config" id="id5">Config</a></p>
<ul>
<li><p><a class="reference internal" href="#transient" id="id6">Transient</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#temporary" id="id7">Temporary</a></p></li>
<li><p><a class="reference internal" href="#momentary" id="id8">Momentary</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#changing-and-querying-values" id="id9">Changing and Querying Values</a></p></li>
<li><p><a class="reference internal" href="#editing-definition-properties" id="id10">Editing Definition Properties</a></p>
<ul>
<li><p><a class="reference internal" href="#human-readable-labels" id="id11">Human-Readable Labels</a></p></li>
<li><p><a class="reference internal" href="#command-dialog-name" id="id12">Command Dialog Name</a></p></li>
<li><p><a class="reference internal" href="#fixed-ranges" id="id13">Fixed Ranges</a></p></li>
<li><p><a class="reference internal" href="#datatype" id="id14">Datatype</a></p></li>
<li><p><a class="reference internal" href="#id1" id="id15">Transient</a></p></li>
<li><p><a class="reference internal" href="#choices" id="id16">Choices</a></p>
<ul>
<li><p><a class="reference internal" href="#static-choices" id="id17">Static Choices</a></p></li>
<li><p><a class="reference internal" href="#procedural-usernames" id="id18">Procedural Usernames</a></p></li>
<li><p><a class="reference internal" href="#list-considerations" id="id19"><em>list</em> Considerations</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#value-presets" id="id20">Value Presets</a></p></li>
<li><p><a class="reference internal" href="#responding-to-value-changes" id="id21">Responding to Value Changes</a></p></li>
<li><p><a class="reference internal" href="#delaying-the-action" id="id22">Delaying the Action</a></p></li>
<li><p><a class="reference internal" href="#enabling-or-disabling" id="id23">Enabling or Disabling</a></p></li>
<li><p><a class="reference internal" href="#notifiers" id="id24">Notifiers</a></p></li>
<li><p><a class="reference internal" href="#default-values" id="id25">Default Values</a></p></li>
<li><p><a class="reference internal" href="#ui-vs-undoable-user-values" id="id26">UI vs. Undoable User Values</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#creating-mutually-exclusive-or-toggle-buttons" id="id27">Creating Mutually Exclusive or Toggle Buttons</a></p></li>
<li><p><a class="reference internal" href="#creating-user-values-from-within-scripts" id="id28">Creating User Values From Within Scripts</a></p></li>
<li><p><a class="reference internal" href="#more-information" id="id29">More Information</a></p></li>
</ul>
</div>
<p>Sometimes <a class="reference internal" href="../scripting/Scripting.html"><span class="doc">Scripting</span></a>, but may also wish to user user values.</p>
<p>User values are implemented through commands.  User value definitions can be stored in the config file (usually one associated with the script), thus avoiding the need to redefine them on every launch.  The current value of a user value can also be stored in the config file, thus allowing for persistence between sessions.</p>
<div class="section" id="user-value">
<h2><a class="toc-backref" href="#id2">user.value</a><a class="headerlink" href="#user-value" title="Permalink to this headline">¶</a></h2>
<p>The <em>user.value</em> command allows existing user values to be queried and modified. These values can be stored in the config file, so they will persist between sessions, or they can exist only <em>temporarily</em> until modo exits, or ‘’momentarily’’, meaning until the script exits.</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span> user.value name:string ?value:*
</pre></div>
</td></tr></table></div>
<p>The <em>name</em> argument is the name of the previously defined user value, where <em>value</em> is the value of its Command System: Basics.</p>
</div>
<div class="section" id="defining">
<h2><a class="toc-backref" href="#id3">Defining</a><a class="headerlink" href="#defining" title="Permalink to this headline">¶</a></h2>
<p>The <em>user.defNew</em> command is used to define new user values. The new value’s <em>name</em> cannot already be defined, and is case sensitive. The <em>type</em> is optional, and will default to the Common Datatypes#string.  The <em>life</em> determines how long the user value persists for, and is described below.</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="n">defNew</span> <span class="n">name</span><span class="p">:</span><span class="n">string</span> <span class="o">&lt;</span><span class="nb">type</span><span class="p">:</span><span class="n">string</span><span class="o">&gt;</span>
             <span class="o">&lt;</span><span class="n">life</span><span class="p">:{</span><span class="n">config</span><span class="o">|</span><span class="n">temporary</span><span class="o">|</span><span class="n">momentary</span><span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>This example defines a new user value named RandomSel.coverage using the percent datatype for a script that randomly selects a certain percentage of polygons in the current layer:</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="n">defNew</span> <span class="n">RandomSel</span><span class="o">.</span><span class="n">coverage</span> <span class="n">percent</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="user-value-lifespan">
<h2><a class="toc-backref" href="#id4">User Value Lifespan</a><a class="headerlink" href="#user-value-lifespan" title="Permalink to this headline">¶</a></h2>
<p>The <em>life</em> argument of <em>user.defNew</em> determines how the user value is stored. There are three life spans available, ‘’config’’, <em>temporary</em> and ‘’momentary’’.</p>
<div class="section" id="config">
<h3><a class="toc-backref" href="#id5">Config</a><a class="headerlink" href="#config" title="Permalink to this headline">¶</a></h3>
<p>The default life span is ‘’’config’’’. This means that the user value will be saved in the config file, and will persist between sessions. If you were to quit and restart modo, this user value would still exist. This is good for user values that you want to use in forms.  Making changes to one with <em>user.defNew</em> or <em>user.def</em> or <em>user.value</em> update the state in the user config.</p>
<div class="section" id="transient">
<h4><a class="toc-backref" href="#id6">Transient</a><a class="headerlink" href="#transient" title="Permalink to this headline">¶</a></h4>
<p>Config user values can be defined so that the default value is loaded from the config, but is not written to it.  These are known as <span class="xref std std-ref">Transient</span>, and are described in more detail below.</p>
</div>
</div>
<div class="section" id="temporary">
<h3><a class="toc-backref" href="#id7">Temporary</a><a class="headerlink" href="#temporary" title="Permalink to this headline">¶</a></h3>
<p>The <strong>temporary</strong> life span creates a user value that will exist only until you quit modo. No state is saved in the config, so the next time you run modo the user value will not exist. This is good for user values that only need to exist between runs of a script, but not across work sessions.</p>
</div>
<div class="section" id="momentary">
<h3><a class="toc-backref" href="#id8">Momentary</a><a class="headerlink" href="#momentary" title="Permalink to this headline">¶</a></h3>
<p>The final class is ‘’’momentary’’’. These user values will exist only until the command that spawned them returns. This is useful in scripts when you want to present the user with a dialog for choosing a value, but do not want them to persist once the script has finished executing. Due to their volatility, these must be created from within scripts to be of any use.</p>
</div>
</div>
<div class="section" id="changing-and-querying-values">
<h2><a class="toc-backref" href="#id9">Changing and Querying Values</a><a class="headerlink" href="#changing-and-querying-values" title="Permalink to this headline">¶</a></h2>
<p>Once the user value above has been created, it can be set to 50% coverage through ‘’user.value’’. As usual, this command accepts both raw values and can be used with square braces for values with units.</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="n">value</span> <span class="n">RandomSel</span><span class="o">.</span><span class="n">coverage</span> <span class="mf">0.5</span>
 <span class="n">user</span><span class="o">.</span><span class="n">value</span> <span class="n">RandomSel</span><span class="o">.</span><span class="n">coverage</span> <span class="p">[</span><span class="mi">50</span> <span class="o">%</span><span class="p">]</span>
</pre></div>
</td></tr></table></div>
<p>Inside the selection script you can read that value back out using the question mark syntax, which in this case will return 0.5:</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span> user.value RandomSel.coverage ?
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="editing-definition-properties">
<h2><a class="toc-backref" href="#id10">Editing Definition Properties</a><a class="headerlink" href="#editing-definition-properties" title="Permalink to this headline">¶</a></h2>
<p>This isn’t quite optimal. If you were to put this value into a forms view, you would see that the name is displayed as the rather unfriendly “RandomSel.coverage”. It would also let you enter negtive numbers, which doesn’t make sense for a selection. Similarly, there’s no point in setting the value above 100%. This is where <em>user.def</em> comes in.</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span> user.def name:string
          attr:{username|type|list|argtype|min|max|action}
          ?value:string
</pre></div>
</td></tr></table></div>
<p>User definitions can be changed at any time.  For example, you may wish to temporarily clear the <span class="xref std std-ref">Transient</span> so that changing a user value’s value won’t execute the command or script associated with it.</p>
<div class="section" id="human-readable-labels">
<h3><a class="toc-backref" href="#id11">Human-Readable Labels</a><a class="headerlink" href="#human-readable-labels" title="Permalink to this headline">¶</a></h3>
<p>The user.def command allows extra properties of a user value to be read and set. First we’ll change the username:</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="k">def</span> <span class="nf">RandomSel</span><span class="o">.</span><span class="n">coverage</span> <span class="n">username</span> <span class="s2">&quot;Coverage&quot;</span>
</pre></div>
</td></tr></table></div>
<p>The <strong>username</strong> property also supports Message Tables. Message table lookups use the format <em>&#64;table&#64;msg&#64;</em> for a dictionary lookup, or <em>&#64;table&#64;&#64;id&#64;</em> for an integer ID based lookup. Using message tables allows the config files to be translated for different languages without editing the script itself.</p>
</div>
<div class="section" id="command-dialog-name">
<h3><a class="toc-backref" href="#id12">Command Dialog Name</a><a class="headerlink" href="#command-dialog-name" title="Permalink to this headline">¶</a></h3>
<p>If you execute <em>user.value</em> without specifying a new value, it will open a standard Command Dialog. The title bar will simply read ‘’User Value’’ in older versions of modo, but as of 401 it will display the <em>username</em> of the value, falling back to the internal name.</p>
<p>You can use ‘’user.def’’’s <strong>dialogname</strong> option to change string displayed in the the dialog’s title bar. As with the username option, you can use either message tables or a hard-coded string.</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="k">def</span> <span class="nf">RandomSel</span><span class="o">.</span><span class="n">coverage</span> <span class="n">dialogname</span> <span class="s2">&quot;Random Selection: Coverage&quot;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="fixed-ranges">
<h3><a class="toc-backref" href="#id13">Fixed Ranges</a><a class="headerlink" href="#fixed-ranges" title="Permalink to this headline">¶</a></h3>
<p>‘’user.def’’ can also be used to set limit the range of a numeric value.  For example, to set the ‘’min’’imum and ‘’max’’imum on our user value:</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="k">def</span> <span class="nf">RandomSel</span><span class="o">.</span><span class="n">coverage</span> <span class="nb">min</span> <span class="mf">0.0</span>
 <span class="n">user</span><span class="o">.</span><span class="k">def</span> <span class="nf">RandomSel</span><span class="o">.</span><span class="n">coverage</span> <span class="nb">max</span> <span class="mf">1.0</span>
</pre></div>
</td></tr></table></div>
<p>Or if you prefer, as percentages using the square brace syntax:</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="k">def</span> <span class="nf">RandomSel</span><span class="o">.</span><span class="n">coverage</span> <span class="nb">min</span> <span class="p">[</span><span class="mf">0.0</span> <span class="o">%</span><span class="p">]</span>
 <span class="n">user</span><span class="o">.</span><span class="k">def</span> <span class="nf">RandomSel</span><span class="o">.</span><span class="n">coverage</span> <span class="nb">max</span> <span class="p">[</span><span class="mi">100</span> <span class="o">%</span><span class="p">]</span>
</pre></div>
</td></tr></table></div>
<p>Now the nice label <em>Coverage</em> will appear when the command is queried in a form, and it cannot be given a value below 0% or above 100%.</p>
</div>
<div class="section" id="datatype">
<h3><a class="toc-backref" href="#id14">Datatype</a><a class="headerlink" href="#datatype" title="Permalink to this headline">¶</a></h3>
<p>The <strong>type</strong> property can be used to change the datatype of the value, or to simply read the current datatype back out.  Changing the datatype clears out any existing value.</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span> user.def myUserValue type ?
 user.def myUserValue type integer
 user.def myUserValue type percent
 user.def myUserValue type string
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id15">Transient</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Transient is a modifier on <span class="xref std std-ref">Config</span> lifespan user values.  Like config user values, the definition is stored in the config file, and the default value is read from the file if found.  However, transient user values are not saved to the config file itself.  This means that any change the user makes is temporary, or ‘’’transient’’’, and upon restarting the application the user value will have its default value.</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="k">def</span> <span class="nf">myConfigUserValue</span> <span class="n">transient</span> <span class="n">true</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="choices">
<h3><a class="toc-backref" href="#id16">Choices</a><a class="headerlink" href="#choices" title="Permalink to this headline">¶</a></h3>
<p>Lits of choices are supported for user values.  They are often static, but can be dynamic if necessary.  Internally, list options are treated as TextValueHints.</p>
<div class="section" id="static-choices">
<h4><a class="toc-backref" href="#id17">Static Choices</a><a class="headerlink" href="#static-choices" title="Permalink to this headline">¶</a></h4>
<p>The <strong>list</strong> property is useful for creating a static list of choices for an integer-type value. Each option in the list is separated by a semicolon. This example lets you pick from ‘’top’’, ‘’bot’’, <em>left</em> and ‘’right’’. Querying the value will return one of those strings in 401 and later (prior to 401, this would return the string’s index: 0, 1, 2 and 3 respectively). Note that it is still possible to set out-of-range values by specifying an integer directly instead of using one of these keywords, so the script must be able to handle those cases. This means that even in 401, you may get back an integer when there is no string at that index.</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="n">defNew</span> <span class="n">AlignWithEdge</span> <span class="n">integer</span>
 <span class="n">user</span><span class="o">.</span><span class="k">def</span> <span class="nf">AlignWithEdge</span> <span class="nb">list</span> <span class="n">top</span><span class="p">;</span><span class="n">bot</span><span class="p">;</span><span class="n">left</span><span class="p">;</span><span class="n">right</span>
</pre></div>
</td></tr></table></div>
<p>If this value was opened in a dialog by omitting the value argument:</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="n">value</span> <span class="n">AlignWithEdge</span>
</pre></div>
</td></tr></table></div>
<p>Then a popup is created. However, the popup shows these lowercase, internal names; its not really what you want to have to present to the user. The <strong>argtype</strong> property allows an ArgumentType entry from the config to be used to provide human-readable names for the options:</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="k">def</span> <span class="nf">AlignWithEdge</span> <span class="n">argtype</span> <span class="s2">&quot;AlignWithEdge-mode&quot;</span>
</pre></div>
</td></tr></table></div>
<p>Now when the command dialog is opened, nice human-readable names like “Bottom” and “Left” are pulled form the <em>AlignWithEdge-mode</em> ‘’ArgumentType’’ entry in the config, instead of the more imposing “bot” and incorrectly capitalized “left”.</p>
</div>
<div class="section" id="procedural-usernames">
<h4><a class="toc-backref" href="#id18">Procedural Usernames</a><a class="headerlink" href="#procedural-usernames" title="Permalink to this headline">¶</a></h4>
<p>It is generally preferable to use the <em>argtype</em> property to set the usernames for the list property, but this is only viable for static lists. Dynamically-generated lists can set usernames via the <strong>listnames</strong> property. Like ‘’list’’s, this takes a semicolon-delimited list of strings. Two semicolons can be used to insert a single semicolon into the name. Any characters are allowed in the name string.</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="k">def</span> <span class="nf">AlignWithEdge</span> <span class="n">listnames</span> <span class="s2">&quot;Top;Bottom;Left;Right&quot;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="list-considerations">
<h4><a class="toc-backref" href="#id19"><em>list</em> Considerations</a><a class="headerlink" href="#list-considerations" title="Permalink to this headline">¶</a></h4>
<p>Lists are meant to for internal strings that are not displayed to the user directly, but are instead used by your script to identify a particular choice. The human-readable strings presented in the interface are provided through the <em>argtype</em> property and <em>ArgumentType]]</em> config entries as described [[#Static Choices or through the <em>listname</em> property, and can contain any characters. The <em>argtype</em> property has the added advantage of supporting translation into other languages without modifying the script itself.</p>
<p>The internal strings, however, have specific limits on the kinds of characters that are allowed. Some characters are used for special behaviors, while others are removed for simplified parsing and management.</p>
<p>The following characters are reserved and cannot be used anywhere in the string:</p>
<ul class="simple">
<li><ul>
<li></li>
</ul>
</li>
<li><p>&amp;</p></li>
<li><p>%</p></li>
<li><p>&#64;</p></li>
<li><p>=</p></li>
<li><p>[space]</p></li>
<li><p>underscore</p></li>
</ul>
<p>Attempting to use these in a list will fail or result in unpredictable behavior.</p>
</div>
</div>
<div class="section" id="value-presets">
<h3><a class="toc-backref" href="#id20">Value Presets</a><a class="headerlink" href="#value-presets" title="Permalink to this headline">¶</a></h3>
<p>‘’Value Presets’’ were introduced in modo 401. This creates a popup to the right of certain control types (notably edit fields) that contain a user-extensible list of named presets. Controls created by scripts can also support this feature through the use of a ‘’’valuepresetcookie’’’.</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="k">def</span> <span class="nf">myValue</span> <span class="n">valuepresetcookie</span> <span class="s2">&quot;myCookie&quot;</span>
</pre></div>
</td></tr></table></div>
<p>The cookie is just a string that is used to lookup and store value presets in the config. All of this work is handled for you simply by setting the cookie. The cookie need not be unique, and multiple controls can use the same cookie (and thus the same list of presets).</p>
</div>
<div class="section" id="responding-to-value-changes">
<h3><a class="toc-backref" href="#id21">Responding to Value Changes</a><a class="headerlink" href="#responding-to-value-changes" title="Permalink to this headline">¶</a></h3>
<p>The most interesting of all the <em>user.def</em> options is ‘’’action’’’. Whenever the value is changed through the <em>user.value</em> command, the action associated with it will be triggered. This action can be any command or script. For example, we could have our random selection script run every time the minislider is tweaked in a form view:</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="k">def</span> <span class="nf">RandomSel</span><span class="o">.</span><span class="n">coverage</span> <span class="n">action</span> <span class="s2">&quot;@RandomSel&quot;</span>
</pre></div>
</td></tr></table></div>
<p>This is a very powerful feature. One of the functions of the commands and forms systems is Command System: Querying#Refiring. In the case of the <em>RandomSel</em> script, this means that you can drag the minislider and watch the selection interactively update. The script feels just like its part of the application.</p>
<p>It is important to take care to avoid recursion issues when using this capability. For example, say you have three buttons based on user values, each of which have an action associated with them. This action changes the user value associated with the other two buttons. Since they also have actions applied, they will each be triggered, changing the value of the other two buttons (one of which is the originally clicked button), and so on. To avoid these issues, be sure to temporarily clear the action option from the user value before you change its value.</p>
</div>
<div class="section" id="delaying-the-action">
<h3><a class="toc-backref" href="#id22">Delaying the Action</a><a class="headerlink" href="#delaying-the-action" title="Permalink to this headline">¶</a></h3>
<p>Normally, any action associated with the user value occurs as soon as the value change. This provides real-time interactive feedback while the user drags a minislider, for example.</p>
<p>While this is a useful behavior, it is not uncommon for complex scripts to take a relatively long time to execute. In those cases it’s more desirable to defer the action until the user has stopped interactively manipulating the control. By setting the user.def property <strong>deferaction</strong> to ‘’1’’, a user value’s action will not trigger until the mouse button is released from the minislider. This feature can significantly improve the apparent interactivity of your user interface, although it is at the expense of immediate feedback.</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="k">def</span>  <span class="nf">myValue</span> <span class="n">defer</span> <span class="n">action</span> <span class="mi">1</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="enabling-or-disabling">
<h3><a class="toc-backref" href="#id23">Enabling or Disabling</a><a class="headerlink" href="#enabling-or-disabling" title="Permalink to this headline">¶</a></h3>
<p>User values can be enabled or disabled by using the enable state or value of another command.  This is done with the user.def property ‘’’enablecommand’’’.  The value is a command string to test, most commonly another call to user.value.</p>
<p>The rules for if a user values is enabled are:</p>
<ul class="simple">
<li><p>The enable command must itself be enabled</p></li>
<li><p>If an argument is marked for query (i.e.: with a question mark in place of its value), then the argument value must be non-zero for a numeric control, true for a boolean, or a non-empty string for a string control.</p></li>
</ul>
<p>For example, if you have a boolean user value with the name ‘’turnOnOption’’, and you want it to toggle your <em>myOption</em> user value, you might do this:</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="k">def</span> <span class="nf">myOption</span> <span class="n">enablecommand</span> <span class="s2">&quot;user.value turnOnOption ?&quot;</span>
</pre></div>
</td></tr></table></div>
<p>Now <em>myOption</em> will be shown as enabled only when the ‘’user.value turnOnOption ?’’ command string is both itself enabled and the <em>turnOnOption</em> user value is true.  The notifiers on the enable command will be used to automatically update the user value’s enable state as needed.</p>
</div>
<div class="section" id="notifiers">
<h3><a class="toc-backref" href="#id24">Notifiers</a><a class="headerlink" href="#notifiers" title="Permalink to this headline">¶</a></h3>
<p>Notifiers are used by commands to let other clients (notably the Forms system) to update when something has changed.  The most common case is updating the value or enabled state of a control.  The <em>user.value</em> command already contains a notifier that updates the form when its value changes, but it can be useful to add extra notifiers from time to time.</p>
<p>This works much like enable commands, where the <strong>notifier</strong> property is used with <em>user.def</em> to set the command string.  The notifiers from that command are then applied to the <em>user.value</em> instance in the form.</p>
</div>
<div class="section" id="default-values">
<h3><a class="toc-backref" href="#id25">Default Values</a><a class="headerlink" href="#default-values" title="Permalink to this headline">¶</a></h3>
<p>The <strong>user.default</strong> command rests user values to their default value.  This uses modo’s <a class="reference internal" href="../tutorials/Pattern%20Matching.html"><span class="doc">Pattern Matching</span></a>, allowing a swath of command to be reset at once.  Normally, the default value is 0 or an empty string.  You can set an alternate default value with the <em>user.def</em> <strong>defaultvalue</strong> property.</p>
</div>
<div class="section" id="ui-vs-undoable-user-values">
<h3><a class="toc-backref" href="#id26">UI vs. Undoable User Values</a><a class="headerlink" href="#ui-vs-undoable-user-values" title="Permalink to this headline">¶</a></h3>
<p>By default, user values are “model undoable”, which means that they show up as undoable commands in the command history.  This is meant for operations that modify the scene state.  In some cases, such as preferences that affect the application state, you want the user value to not be undoable, and instead to be represented as a UI command.  It is also possible to define a user value as being “UI undoable”, which is a command that affects the application state but lets the user undo a mistake immediately after it has been made.  Executing a model undoable command makes any previous UI undoable commands no longer undoable.</p>
<p>The <strong>uiMode</strong> property is used to change the undo mode, and can be set to one of three values:</p>
<ul class="simple">
<li><p>‘’’undoModel’’’:  This is the default behavior, an undoable command that affects the model state, and is a normal part of the undo stack.</p></li>
<li><p>‘’’undoUI’’’:  An undoable command for UI purposes.  It is only undoable until a model command is executed.</p></li>
<li><p>‘’’pureUI’’’: A command that is not undoable at all, and shows up as a UI command in the command history.</p></li>
</ul>
</div>
</div>
<div class="section" id="creating-mutually-exclusive-or-toggle-buttons">
<h2><a class="toc-backref" href="#id27">Creating Mutually Exclusive or Toggle Buttons</a><a class="headerlink" href="#creating-mutually-exclusive-or-toggle-buttons" title="Permalink to this headline">¶</a></h2>
<p>Various controls in modo operate as mutually exclusive buttons (also known as “radio buttons”), where only one of a series of options can be active at any time. Others operate as toggle buttons, such as the many tool buttons in modo. These are similar to boolean checkmark buttons, but the label is on the face of the button.  A tool-style button can be made from a Common Datatypes#boolean, but to get mutually exclusive style behavior, you’d either need to have a custom action script handle changing the state of the other buttons.  Or, you can use ‘’’user.toggle’’’.</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="n">toggle</span> <span class="n">name</span><span class="p">:</span><span class="n">string</span> <span class="n">valueOn</span><span class="p">:</span><span class="n">integer</span> <span class="o">&lt;</span><span class="n">valueOff</span><span class="p">:</span><span class="n">integer</span><span class="o">&gt;</span>
             <span class="n">toggle</span><span class="p">:</span><span class="n">boolean</span>
</pre></div>
</td></tr></table></div>
<p>‘’user.toggle’’ requires an integer user value that uses lists. Such values are defined in a manner similar to this:</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="n">defNew</span> <span class="n">myValue</span> <span class="n">integer</span>
 <span class="n">user</span><span class="o">.</span><span class="k">def</span> <span class="nf">myValue</span> <span class="nb">list</span> <span class="s2">&quot;a;b;c;d&quot;</span>
</pre></div>
</td></tr></table></div>
<p>Don’t forget to specify usernames with the <em>argtype</em> or <em>listnames</em> properties.</p>
<p>Inserting this into a form as ‘’user.value myValue ?’’ will create a popup. To create a toggle button for a single option, you can use ‘’user.toggle’’. A very simple on/off style button could be created like so, if you didn’t want to use the boolean datatype.:</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="n">defNew</span> <span class="n">onOff</span> <span class="n">integer</span>
 <span class="n">user</span><span class="o">.</span><span class="k">def</span> <span class="nf">onOff</span> <span class="nb">list</span> <span class="s2">&quot;on;off&quot;</span>
</pre></div>
</td></tr></table></div>
<p>Here is an example of how <em>user.toggle</em> works. The <em>toggle</em> argument simply changes the current value to either <em>valueOn</em> or ‘’valueOff’’. This argument can also be queried. You can execute <em>user.toggle</em> like so to set the value to ‘’on’’:</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="n">toggle</span> <span class="n">onOff</span> <span class="n">on</span> <span class="n">off</span> <span class="mi">1</span>
</pre></div>
</td></tr></table></div>
<p>Meanwhile, this will change the value to ‘’off’’:</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="n">toggle</span> <span class="n">onOff</span> <span class="n">on</span> <span class="n">off</span> <span class="mi">0</span>
</pre></div>
</td></tr></table></div>
<p>When used in a form, the <em>toggle</em> argument is automatically queried for its value (since it is defined as a Command System: Basics#ToggleValue argument) and is used to decide if the button is on or off. Clicking the button will then execute <em>user.toggle</em> with the <em>toggle</em> argument set to <em>valueOn</em> or <em>valueOff</em> as appropriate.</p>
<p>Note that since <em>toggle</em> is a ToggleValue argument, when you insert it into a form you need to set it to ‘’1’’. Do not use a question mark, as this will not work.</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="n">toggle</span> <span class="n">onOff</span> <span class="n">on</span> <span class="n">off</span> <span class="mi">1</span>
</pre></div>
</td></tr></table></div>
<p>The above creates a single button. If you want a series of mutually exclusive buttons, just create more buttons in the form. If you had a user value defined like so:</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="n">defNew</span> <span class="n">threeChoices</span> <span class="n">integer</span>
 <span class="n">user</span><span class="o">.</span><span class="k">def</span> <span class="nf">threeChoices</span> <span class="nb">list</span> <span class="s2">&quot;yes;maybe;no&quot;</span>
</pre></div>
</td></tr></table></div>
<p>You can insert these three commands into a form. To create a traditional radio button style interface, you may want to use a horizontal toolbar.</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">user</span><span class="o">.</span><span class="n">toggle</span> <span class="n">threeChoices</span> <span class="n">yes</span> <span class="n">toggle</span><span class="p">:</span><span class="mi">1</span>
 <span class="n">user</span><span class="o">.</span><span class="n">toggle</span> <span class="n">threeChoices</span> <span class="n">maybe</span> <span class="n">toggle</span><span class="p">:</span><span class="mi">1</span>
 <span class="n">user</span><span class="o">.</span><span class="n">toggle</span> <span class="n">threeChoices</span> <span class="n">no</span> <span class="n">toggle</span><span class="p">:</span><span class="mi">1</span>
</pre></div>
</td></tr></table></div>
<p>Notice that we skipped the valueOff argument. This means that clicking on a currently “on” button will not turn it off again. Since clicking on any of the currently off buttons changes the user value used by all three of the buttons, that one button will go on and the other two will go off. Note that any associated action will only be triggered for the user value of the one button that just changed state, not for the other two buttons that weren’t explicitly clicked on.</p>
</div>
<div class="section" id="creating-user-values-from-within-scripts">
<h2><a class="toc-backref" href="#id28">Creating User Values From Within Scripts</a><a class="headerlink" href="#creating-user-values-from-within-scripts" title="Permalink to this headline">¶</a></h2>
<p>User values used in forms are defined in configs. You can have a script create these user value directly rather than shipping them in a config with your script.  This is most often done for  the short-lived <em>temporary</em> and <em>momentary</em> lifespan user values, as opposed to <em>config</em> lifespan user values.  Creating config-level user values from a script is somewhat legacy, as you usually will ship a config with your script for its UI, [[Kits|kit], etc. anyway.</p>
<div class="highlight-perl notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="c1">#perl</span>

 <span class="c1"># See if the user value exists</span>
 <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="n">lxq</span><span class="p">(</span> <span class="s">&quot;query scriptsysservice userValue.isDefined ? MyValue&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
     <span class="c1"># Value doesn&#39;t exist; create it with calls to user.defNew</span>
     <span class="c1">#  and user.def, and give it an initial value with</span>
     <span class="c1">#  user.value</span>
     <span class="n">lx</span><span class="p">(</span> <span class="s">&quot;user.defNew MyValue integer&quot;</span> <span class="p">);</span>
     <span class="n">lx</span><span class="p">(</span> <span class="s">&quot;user.def MyValue min 0&quot;</span> <span class="p">);</span>
     <span class="n">lx</span><span class="p">(</span> <span class="s">&quot;user.def MyValue max 10&quot;</span> <span class="p">);</span>
 <span class="p">}</span>

 <span class="c1"># See if a value has been set yet</span>
 <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="n">lxq</span><span class="p">(</span> <span class="s">&quot;query scriptsysservice userValue.isSet ? MyValue&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="n">lx</span><span class="p">(</span> <span class="s">&quot;user.value MyValue 5&quot;</span> <span class="p">);</span>
 <span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>An important detail of this example is that it checks to see if the value is set before calling ‘’user.value’’. This is because <em>user.defNew</em> and <em>user.def</em> are side effect commands – they are not undoable, but <em>user.value</em> is so that it can support refiring. This means that if the user undoes the script, the value will be restored to its default, while the definition would remain, and future executions of the script would have the uninitialized value instead of the default you intended.</p>
<p>If you simply need the user value to exist, you can just create it directly with ‘’user.defNew’’. To avoid the error dialog that would normally appear, you can use the Command System: SuppressingDialogs: ! syntax to suppress it. This has limitations, however: the datatype of the existing value might not match the value you want; you won’t want to just replace the existing user value; and changing the properties with <em>user.def</em> may cause any existing value to be reset.</p>
<div class="highlight-perl notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="c1">#perl</span>

 <span class="c1"># Just create the user value, ignoring any errors (like if it</span>
 <span class="c1"># already exists). This might cause unexpected behavior if the</span>
 <span class="c1"># value exists, but is of a different datatype than what you</span>
 <span class="c1"># expect.</span>
 <span class="n">lx</span><span class="p">(</span> <span class="s">&quot;!user.defNew MyValue integer&quot;</span> <span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>You can also use ScriptQuery: scriptsysservice to tell if the user value has been set yet and what its lifespan is.</p>
</div>
<div class="section" id="more-information">
<h2><a class="toc-backref" href="#id29">More Information</a><a class="headerlink" href="#more-information" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../scripting/Scripting.html"><span class="doc">Scripting</span></a></p></li>
<li><p><a class="reference internal" href="../general/systems/Command%20System.html"><span class="doc">Command System</span></a></p></li>
<li><p>User Interface</p></li>
<li><p><a class="reference internal" href="../tutorials/RandomSel%20Script.html"><span class="doc">RandomSel Script</span></a> provides an example of scripting and creating a user interface with User Values.</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../scripting/_scripting.html" class="btn btn-neutral float-right" title="Scripting" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="User%20Interface%20and%20Plug-Ins.html" class="btn btn-neutral float-left" title="User Interface and Plug-Ins" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Foundry

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org/">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>

<!-- Mirrored from learn.foundry.com/modo/developers/latest/sdk/pages/ui/User Values.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 30 Nov 2024 03:16:00 GMT -->
</html>