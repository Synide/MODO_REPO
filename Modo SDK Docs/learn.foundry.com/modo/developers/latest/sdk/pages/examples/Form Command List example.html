

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<!-- Mirrored from learn.foundry.com/modo/developers/latest/sdk/pages/examples/Form Command List example.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 30 Nov 2024 03:16:11 GMT -->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Form Command List example &mdash; Modo SDK 14.2v0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/js/contentui.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Get Scene Savers example" href="Get%20Scene%20Savers%20example.html" />
    <link rel="prev" title="File Browser Command" href="File%20Browser%20Command.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Modo SDK
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="https://learn.foundry.com/modo/developers/latest/sdk/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Articles</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../starting/_starting.html">First Steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server_basics/_server_basics.html">Server Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/_general.html">Editorial Info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ui/_ui.html">User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scripting/_scripting.html">Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faqs/_faqs.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption"><span class="caption-text">Code Examples</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../tutorials/_tutorials.html">SDK Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="_examples.html">Code Examples and Snippets</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Channel%20Modifier%20Python%20Wrapper.html">Channel Modifier Python Wrapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="Create%20Vertex%20Mesh%20Operation.html">CreateVertex Mesh Operation Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="Example%20cmd%20sy%20partifymesh.html">Example cmd sy partifymesh</a></li>
<li class="toctree-l2"><a class="reference internal" href="File%20Browser%20Command.html">File Browser Command</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Form Command List example</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#form-command-list">Form Command List</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Get%20Scene%20Savers%20example.html">Get Scene Savers example</a></li>
<li class="toctree-l2"><a class="reference internal" href="Load%20Clip%20example.html">Load Clip example</a></li>
<li class="toctree-l2"><a class="reference internal" href="Modo%20Socket%20comms%20wrapper.html">Modo Socket comms wrapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="PlaneTool%20example.html">PlaneTool example</a></li>
<li class="toctree-l2"><a class="reference internal" href="Read%20a%20Driven%20Channel.html">Read a Driven Channel</a></li>
<li class="toctree-l2"><a class="reference internal" href="Rebuild%20Curve.html">Rebuild Curve</a></li>
<li class="toctree-l2"><a class="reference internal" href="Rename%20Item%20example.html">Rename Item example</a></li>
<li class="toctree-l2"><a class="reference internal" href="Setting%20a%20string%20channels%20default%20value.html">Setting a string channels default value</a></li>
<li class="toctree-l2"><a class="reference internal" href="Shader%20Tree%20Navigation.html">Shader Tree Navigation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Spherize%20example.html">Spherize example</a></li>
<li class="toctree-l2"><a class="reference internal" href="Wav%20Dump%20example.html">Wav Dump example</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Technical Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../python/python.html">Python Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpp/cpp.html">C++ Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Modo SDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="_examples.html">Code Examples and Snippets</a> &raquo;</li>
        
      <li>Form Command List example</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="form-command-list-example">
<h1>Form Command List example<a class="headerlink" href="#form-command-list-example" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#form-command-list" id="id1">Form Command List</a></p></li>
</ul>
</div>
<div class="section" id="form-command-list">
<h2><a class="toc-backref" href="#id1">Form Command List</a><a class="headerlink" href="#form-command-list" title="Permalink to this headline">¶</a></h2>
<p>A Form Command List is a <strong>special</strong> use case of the UIValueHints class for when you need to create discrete controls in a form. For example, the Item Tags form shows edit fields for each of the selected items’ tags. The User Channels form does something similar, creating edit fields based on the datatype of each user channel on the selected items. In general, if all you need to do is create a pop-up list of choices in a form then you’d be better off implementing a command that defines a queriable string argument, and implementing a UIValueHints object with PopCount(), PopInternalName() and PopUserName() methods.</p>
<p>In order for your command to update the contents of the command list you would, additionally, need to use either an existing <em>notifier</em> or implement a new <em>notifier</em> that sends a DATATYPE invalidation (which will cause the form to rebuild the Form Command List from scratch) and associate the command with it so that forms will know to update itself when the list changes. Notifiers listen for events (usually selection changes, or external changes to a command’s value, such as when the same command is mapped to a key) and alert forms as to how it should refresh the control. The commands within the Form Command List will use their own notifiers to update as needed.</p>
<p>A simple (and somewhat trivial) example of a LXfVALHINT_FORM_COMMAND_LIST_(index)#C73 command</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="c1">################################################################################</span>
<span class="c1">#</span>
<span class="c1"># FormCommandList.py</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1"># Description: A simple example of creating a &#39;Form Command List&#39; custom command,</span>
<span class="c1">#              see http://modo.sdk.thefoundry.co.uk/wiki/LXfVALHINT_FORM_COMMAND_LIST_(index)#C73</span>
<span class="c1">#              for more info</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1"># Usage: Enter the command name into a form as a query ie</span>
<span class="c1">#        replace.me ?</span>
<span class="c1">#</span>
<span class="c1"># Last Update: 22:41 30/04/13</span>
<span class="c1">#</span>
<span class="c1">################################################################################</span>

<span class="kn">import</span> <span class="nn">lx</span>
<span class="kn">import</span> <span class="nn">lxifc</span>
<span class="kn">import</span> <span class="nn">lxu.command</span>

<span class="c1"># This is our list of commands. You can generate this list any way you like</span>
<span class="c1"># including procedurally - in fact the most common use case for a Form Command</span>
<span class="c1"># List would be to generate a list of commands to show in a form procedurally.</span>
<span class="n">cmdlist</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;item.name&#39;</span><span class="p">,</span>
           <span class="c1"># A string in the list that starts with a dash (hyphen) followed by</span>
           <span class="c1"># a space becomes a line divider in the form.</span>
           <span class="s1">&#39;- &#39;</span><span class="p">,</span>
           <span class="s1">&#39;item.color&#39;</span><span class="p">,</span>
           <span class="s1">&#39;item.comment&#39;</span><span class="p">,</span>
           <span class="c1"># A string in the list that starts with a dash (hyphen) followed by</span>
           <span class="c1"># a space and then a string becomes a labelled divider in the form.</span>
           <span class="s1">&#39;- I am a Divider&#39;</span><span class="p">,</span>
           <span class="s1">&#39;item.create&#39;</span><span class="p">,</span>
           <span class="s1">&#39;item.tagAdd&#39;</span><span class="p">]</span>


<span class="c1"># The UIValueHints object that returns the items in the list of commands</span>
<span class="c1"># to the form.</span>
<span class="k">class</span> <span class="nc">MycommandsList</span><span class="p">(</span><span class="n">lxifc</span><span class="o">.</span><span class="n">UIValueHints</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">items</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_items</span> <span class="o">=</span> <span class="n">items</span>

    <span class="k">def</span> <span class="nf">uiv_Flags</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># This is a series of flags, although in this case we&#39;re only returning</span>
        <span class="c1"># &#39;&#39;fVALHINT_FORM_COMMAND_LIST&#39;&#39; to indicate that there&#39;s a Form Command</span>
        <span class="c1"># List implemented.</span>
        <span class="k">return</span> <span class="n">lx</span><span class="o">.</span><span class="n">symbol</span><span class="o">.</span><span class="n">fVALHINT_FORM_COMMAND_LIST</span>

    <span class="k">def</span> <span class="nf">uiv_FormCommandListCount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">uiv_FormCommandListByIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">index</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>


<span class="c1"># This is the command that will be replaced by the commands in MyCommandsList</span>
<span class="c1"># in any form in which it&#39;s embedded as a query. It requires a queriable</span>
<span class="c1"># attribute/argument but neither of the command&#39;s &#39;&#39;cmd_Execute&#39;&#39; or &#39;&#39;cmd_Query&#39;&#39; methods</span>
<span class="c1"># need to be implemented as neither will be called when the argument is queried</span>
<span class="c1"># in a form.  You can still implement them, but they will only be used when</span>
<span class="c1">#executing/querying from scripts or CHist etc.</span>
<span class="k">class</span> <span class="nc">CmdMyFormCommandsList</span><span class="p">(</span><span class="n">lxu</span><span class="o">.</span><span class="n">command</span><span class="o">.</span><span class="n">BasicCommand</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">lxu</span><span class="o">.</span><span class="n">command</span><span class="o">.</span><span class="n">BasicCommand</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># Add an integer attribute. The attribute is required</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dyna_Add</span><span class="p">(</span><span class="s1">&#39;cmds&#39;</span><span class="p">,</span> <span class="n">lx</span><span class="o">.</span><span class="n">symbol</span><span class="o">.</span><span class="n">sTYPE_INTEGER</span><span class="p">)</span>
        <span class="c1"># mark it as queriable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">basic_SetFlags</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">lx</span><span class="o">.</span><span class="n">symbol</span><span class="o">.</span><span class="n">fCMDARG_QUERY</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">arg_UIValueHints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="c1"># create an instance of our commands list object passing it the</span>
        <span class="c1"># list of commands.</span>
        <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">MycommandsList</span><span class="p">(</span><span class="n">cmdlist</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cmd_Execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">flags</span><span class="p">):</span>
        <span class="c1"># dummy execute method</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">cmd_Query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">index</span><span class="p">,</span><span class="n">vaQuery</span><span class="p">):</span>
        <span class="c1"># dummy query method</span>
        <span class="k">pass</span>

<span class="c1"># &#39;blessing&#39; the class registers it as a plugin command. The command string, the</span>
<span class="c1"># string that you embed as a query in a form is the second argument to bless(), ie</span>
<span class="c1"># &#39;replace.me&#39;</span>
<span class="n">lx</span><span class="o">.</span><span class="n">bless</span><span class="p">(</span><span class="n">CmdMyFormCommandsList</span><span class="p">,</span> <span class="s2">&quot;replace.me&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Get%20Scene%20Savers%20example.html" class="btn btn-neutral float-right" title="Get Scene Savers example" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="File%20Browser%20Command.html" class="btn btn-neutral float-left" title="File Browser Command" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Foundry

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org/">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>

<!-- Mirrored from learn.foundry.com/modo/developers/latest/sdk/pages/examples/Form Command List example.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 30 Nov 2024 03:16:11 GMT -->
</html>